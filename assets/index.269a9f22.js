var _o=Object.defineProperty,Ko=Object.defineProperties;var Uo=Object.getOwnPropertyDescriptors;var yt=Object.getOwnPropertySymbols;var Wn=Object.prototype.hasOwnProperty,qn=Object.prototype.propertyIsEnumerable;var Ln=(a,c,s)=>c in a?_o(a,c,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[c]=s,N=(a,c)=>{for(var s in c||(c={}))Wn.call(c,s)&&Ln(a,s,c[s]);if(yt)for(var s of yt(c))qn.call(c,s)&&Ln(a,s,c[s]);return a},re=(a,c)=>Ko(a,Uo(c));var Re=(a,c)=>{var s={};for(var u in a)Wn.call(a,u)&&c.indexOf(u)<0&&(s[u]=a[u]);if(a!=null&&yt)for(var u of yt(a))c.indexOf(u)<0&&qn.call(a,u)&&(s[u]=a[u]);return s};import{K as it,R as zt,d as I,L as Ae,M as Xo,j as d,N as Nn,O as Yo,T as jn,U as Qn,V as $n,W as _n,B as Oe,r as me,Y as Jo,Z as Zo,_ as Ze,c as Ge,$ as $e,a0 as Fe,a1 as Kn,a2 as ea,a3 as st,a4 as bt,a5 as _e,a6 as Me,a7 as ke,a8 as Te,a9 as ta,o as we,p as Un,l as Ve,aa as na,ab as ra,ac as oa,ad as aa,P as ia,e as sa,ae as la,af as Xn,n as ua,ag as ca,ah as da,ai as ga,aj as pa,ak as Yn,al as fa,am as ma,an as va,ao as Jn,ap as ha,aq as ya,ar as ba,as as Ke,at as wa,au as Zn,av as Sa,aw as Vt,F as xa,m as Ca,X as er,i as Ht,ax as Ra,ay as Pa,az as wt,aA as ka,aB as Ea,aC as Ia,aD as Ba,aE as Aa,aF as Fa,aG as Ma,h as Oa,aH as Ta,aI as Ga,aJ as Da,aK as St,aL as lt,aM as za,aN as Va,aO as Ha,a as Ue,C as Wa,aP as qa,aQ as La,aR as Na,aS as ja,aT as Qa,aU as $a,aV as Wt,aW as _a,aX as qt,aY as Ka,u as Lt,aZ as Ua,a_ as Xa,a$ as Ya,b0 as Ja,b1 as Za,x as ei,b2 as ti}from"./vendor.00202c1b.js";import{a as ye,P as tr,u as ni}from"./PlanosurLogo.155df7cd.js";import{F as He,A as Xe,D as xt}from"./index.16b6b570.js";const ri=({actionButton:a,confirmText:c="Aceptar",cancelText:s="Cancelar",message:u,title:y,onConfirm:R})=>{const{isOpen:p,onOpen:A,onClose:U}=it(),g=zt.useRef(null),H=zt.cloneElement(a,{onClick:A});return I(Ae,{children:[H,I(Xo,{motionPreset:"slideInBottom",leastDestructiveRef:g,onClose:U,isOpen:p,isCentered:!0,children:[d(Nn,{}),I(Yo,{children:[d(jn,{children:y}),d(Qn,{}),d($n,{children:u}),I(_n,{children:[d(Oe,{ref:g,onClick:U,variant:"outline",colorScheme:"gray",children:s}),d(Oe,{colorScheme:"red",ml:3,onClick:()=>{R(),U()},children:c})]})]})]})]})},ut=J=>{var q=J,{confirmationMessage:a,isOpen:c,isLoading:s,error:u,onClose:y,title:R,submitText:p,submitProps:A,onSubmit:U,children:g,size:H="xl",withConfirmation:W}=q,j=Re(q,["confirmationMessage","isOpen","isLoading","error","onClose","title","submitText","submitProps","onSubmit","children","size","withConfirmation"]);const X=`form_${Math.random()}`,se=me.exports.useRef(null);return I(Jo,re(N({},j),{isOpen:c,onClose:y,autoFocus:!0,closeOnEsc:!0,closeOnOverlayClick:!1,scrollBehavior:"inside",size:H,children:[d(Nn,{}),I(Zo,{children:[d(jn,{children:R}),d(Qn,{disabled:s,tabIndex:-1}),d($n,{children:I("form",{onSubmit:U,id:X,ref:se,children:[d(Ze,{spacing:5,align:"stretch",children:g}),u&&I(Ge,{mt:8,color:"error",children:[d($e,{}),d(Fe,{mt:3,children:u})]})]})}),d(_n,{mt:2,children:I(Kn,{spacing:4,children:[d(Oe,{colorScheme:"grey",variant:"outline",onClick:y,disabled:s,children:"Cancelar"}),W?d(ri,{message:a||"Esta seguro?",title:R,onConfirm:()=>{var te;return(te=se.current)==null?void 0:te.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},actionButton:d(Oe,re(N({},A),{isLoading:s,iconSpacing:3,spinnerPlacement:"end",loadingText:"Solicitando",children:p}))}):d(Oe,re(N({type:"submit"},A),{isLoading:s,iconSpacing:3,spinnerPlacement:"end",loadingText:"Solicitando",form:X,children:p}))]})})]})]}))};function et(j){var J=j,{fields:a,title:c,submitText:s,rules:u,query:y,queryParams:R,onSuccess:p,onClose:A,isOpen:U,disabled:g,children:H}=J,W=Re(J,["fields","title","submitText","rules","query","queryParams","onSuccess","onClose","isOpen","disabled","children"]);const{mutate:q,isLoading:X,error:se,reset:te}=y(R),Z=ea(()=>a.flat().reduce((k,ue)=>re(N({},k),{[ue.name]:ue.initialValue}),{})),{register:M,handleSubmit:Q,formState:{errors:L,dirtyFields:oe},reset:Pe,resetField:_}=st({defaultValues:Z,shouldFocusError:!0});me.exports.useEffect(()=>{a.flat().forEach(k=>{_(k.name,{defaultValue:k.initialValue})})},[Z,a,_]);function le(){A(),Pe(),te()}return I(ut,re(N({isOpen:U,onClose:le,onSubmit:Q(k=>q(k,{onSuccess:()=>{le(),p&&p()}})),error:se==null?void 0:se.message,submitText:s,submitProps:{disabled:g||!Object.values(oe).some(k=>k)},title:c,isLoading:X},W),{children:[H,a.map(k=>{var ue;return Array.isArray(k)?d(bt,{gap:4,alignItems:"flex-end",children:k.map(pe=>{var Ie;return d(He,N({isLoading:X||Boolean(g),error:(Ie=L[pe.name])==null?void 0:Ie.message,data:pe},M(pe.name,u==null?void 0:u[pe.name])),pe.name)})},k.reduce((pe,Ie)=>pe+Ie.name,"")):d(He,N({isLoading:X||Boolean(g),error:(ue=L[k.name])==null?void 0:ue.message,data:k},M(k.name,u==null?void 0:u[k.name])),k.name)})]}))}const Ee={base:["products"],simple:a=>[...Ee.base,"simple",a||""],byCode:a=>[...Ee.base,a||""],filtered:a=>[...Ee.base,"filtered",a]};function oi({code:a,enabled:c}){return _e(Ee.byCode(a),async()=>(await ye.get(`/products/${a}`)).data,{enabled:c})}function Nt(s){var u=s,{enabled:a=!0}=u,c=Re(u,["enabled"]);const R=Object.entries(c).map(p=>`${p[0]}=${p[1]}`).join("&");return _e(Ee.filtered(c),async()=>(await ye.get(`/products${R?`?${R}`:""}`)).data,{enabled:a})}function jt(s){var u=s,{enabled:a=!0}=u,c=Re(u,["enabled"]);const R=Object.entries(c).map(p=>`${p[0]}=${p[1]}`).join("&");return _e(Ee.simple(R),async()=>(await ye.get(`/products/simple${R?`?${R}`:""}`)).data,{enabled:a})}function ai(a){const c=ke(),s=Te({variant:"top-accent",position:"bottom-left"});return Me(async u=>(await ye.patch(`/products/${a}`,u)).data,{onSuccess:u=>{c.setQueryData(Ee.byCode(a),u),c.invalidateQueries(Ee.base),s({title:"Producto actualizado",status:"success"})},onError:()=>{s({title:"No se pudo actualizar el producto",status:"error"})}})}function ii(){const a=ke(),c=Te({variant:"top-accent",position:"bottom-left"});return Me(async s=>(await ye.delete(`/products/${s}`)).data,{onSuccess:(s,u)=>{a.setQueryData(Ee.byCode(u),()=>{}),a.invalidateQueries(Ee.base),c({title:"Producto eliminado",status:"success"})},onError:()=>{c({title:"Error al eliminar el producto",status:"error"})}})}function si(){const a=ke(),c=Te({variant:"top-accent",position:"bottom-left"});return Me(async s=>(await ye.post("/products",s)).data,{onSuccess:()=>{a.invalidateQueries(Ee.base),c({title:"Producto creado",status:"success"})},onError:()=>{c({title:"Error al crear el producto",status:"error"})}})}var Ct={exports:{}},Qt={exports:{}};(function(a,c){(function(s,u){u(c,me.exports)})(ta,function(s,u){function y(e,t,n,r,i,o,l){try{var f=e[o](l),m=f.value}catch(v){return void n(v)}f.done?t(m):Promise.resolve(m).then(r,i)}function R(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function l(m){y(o,r,i,l,f,"next",m)}function f(m){y(o,r,i,l,f,"throw",m)}l(void 0)})}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){if(e==null)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function U(e){var t=function(n,r){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,r||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(e,"string");return typeof t=="symbol"?t:String(t)}u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u;var g={init:"init"},H=function(e){var t=e.value;return t===void 0?"":t},W=function(){return u.createElement(u.Fragment,null,"\xA0")},j={Cell:H,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function J(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(r,i){var o=i.style,l=i.className;return r=p({},r,{},A(i,["style","className"])),o&&(r.style=r.style?p({},r.style||{},{},o||{}):o),l&&(r.className=r.className?r.className+" "+l:l),r.className===""&&delete r.className,r},{})}var q=function(e,t){return t===void 0&&(t={}),function(n){return n===void 0&&(n={}),[].concat(e,[n]).reduce(function(r,i){return function o(l,f,m){return typeof f=="function"?o({},f(l,m)):Array.isArray(f)?J.apply(void 0,[l].concat(f)):J(l,f)}(r,i,p({},t,{userProps:n}))},{})}},X=function(e,t,n,r){return n===void 0&&(n={}),e.reduce(function(i,o){return o(i,n)},t)},se=function(e,t,n){return n===void 0&&(n={}),e.forEach(function(r){r(t,n)})};function te(e,t,n,r){e.findIndex(function(i){return i.pluginName===n}),t.forEach(function(i){e.findIndex(function(o){return o.pluginName===i})})}function Z(e,t){return typeof e=="function"?e(t):e}function M(e){var t=u.useRef();return t.current=e,u.useCallback(function(){return t.current},[])}var Q=typeof document!="undefined"?u.useLayoutEffect:u.useEffect;function L(e,t){var n=u.useRef(!1);Q(function(){n.current&&e(),n.current=!0},t)}function oe(e,t,n){return n===void 0&&(n={}),function(r,i){i===void 0&&(i={});var o=typeof r=="string"?t[r]:r;if(o===void 0)throw console.info(t),new Error("Renderer Error \u261D\uFE0F");return Pe(o,p({},e,{column:t},n,{},i))}}function Pe(e,t){return function(r){return typeof r=="function"&&(i=Object.getPrototypeOf(r)).prototype&&i.prototype.isReactComponent;var i}(n=e)||typeof n=="function"||function(r){return typeof r=="object"&&typeof r.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(r.$$typeof.description)}(n)?u.createElement(e,t):e;var n}function _(e,t,n){return n===void 0&&(n=0),e.map(function(r){return k(r=p({},r,{parent:t,depth:n})),r.columns&&(r.columns=_(r.columns,r,n+1)),r})}function le(e){return De(e,"columns")}function k(e){var t=e.id,n=e.accessor,r=e.Header;if(typeof n=="string"){t=t||n;var i=n.split(".");n=function(o){return function(l,f,m){if(!f)return l;var v,x=typeof f=="function"?f:JSON.stringify(f),w=Ie.get(x)||function(){var S=function(h){return function b(P,C){if(C===void 0&&(C=[]),Array.isArray(P))for(var F=0;F<P.length;F+=1)b(P[F],C);else C.push(P);return C}(h).map(function(b){return String(b).replace(".","_")}).join(".").replace(rt,".").replace(gt,"").split(".")}(f);return Ie.set(x,S),S}();try{v=w.reduce(function(S,h){return S[h]},l)}catch{}return v!==void 0?v:m}(o,i)}}if(!t&&typeof r=="string"&&r&&(t=r),!t&&e.columns)throw console.error(e),new Error('A column ID (or unique "Header" value) is required!');if(!t)throw console.error(e),new Error("A column ID (or string accessor) is required!");return Object.assign(e,{id:t,accessor:n}),e}function ue(e,t){if(!t)throw new Error;return Object.assign(e,p({Header:W,Footer:W},j,{},t,{},e)),Object.assign(e,{originalWidth:e.width}),e}function pe(e,t,n){n===void 0&&(n=function(){return{}});for(var r=[],i=e,o=0,l=function(){return o++},f=function(){var m={headers:[]},v=[],x=i.some(function(w){return w.parent});i.forEach(function(w){var S,h=[].concat(v).reverse()[0];x&&(w.parent?S=p({},w.parent,{originalId:w.parent.id,id:w.parent.id+"_"+l(),headers:[w]},n(w)):S=ue(p({originalId:w.id+"_placeholder",id:w.id+"_placeholder_"+l(),placeholderOf:w,headers:[w]},n(w)),t),h&&h.originalId===S.originalId?h.headers.push(w):v.push(S)),m.headers.push(w)}),r.push(m),i=v};i.length;)f();return r.reverse()}var Ie=new Map;function Se(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r+=1)if(t[r]!==void 0)return t[r]}function je(e){if(typeof e=="function")return e}function De(e,t){var n=[];return function r(i){i.forEach(function(o){o[t]?r(o[t]):n.push(o)})}(e),n}function dt(e,t){var n=t.manualExpandedKey,r=t.expanded,i=t.expandSubRows,o=i===void 0||i,l=[];return e.forEach(function(f){return function m(v,x){x===void 0&&(x=!0),v.isExpanded=v.original&&v.original[n]||r[v.id],v.canExpand=v.subRows&&!!v.subRows.length,x&&l.push(v),v.subRows&&v.subRows.length&&v.isExpanded&&v.subRows.forEach(function(w){return m(w,o)})}(f)}),l}function Qe(e,t,n){return je(e)||t[e]||n[e]||n.text}function nt(e,t,n){return e?e(t,n):t===void 0}function Je(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var ze=null,rt=/\[/g,gt=/\]/g,It=function(e){return p({role:"table"},e)},vr=function(e){return p({role:"rowgroup"},e)},hr=function(e,t){var n=t.column;return p({key:"header_"+n.id,colSpan:n.totalVisibleHeaderCount,role:"columnheader"},e)},yr=function(e,t){var n=t.column;return p({key:"footer_"+n.id,colSpan:n.totalVisibleHeaderCount},e)},br=function(e,t){return p({key:"headerGroup_"+t.index,role:"row"},e)},wr=function(e,t){return p({key:"footerGroup_"+t.index},e)},Sr=function(e,t){return p({key:"row_"+t.row.id,role:"row"},e)},xr=function(e,t){var n=t.cell;return p({key:"cell_"+n.row.id+"_"+n.column.id,role:"cell"},e)};function Cr(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[It],getTableBodyProps:[vr],getHeaderGroupProps:[br],getFooterGroupProps:[wr],getHeaderProps:[hr],getFooterProps:[yr],getRowProps:[Sr],getCellProps:[xr],useFinalInstance:[]}}g.resetHiddenColumns="resetHiddenColumns",g.toggleHideColumn="toggleHideColumn",g.setHiddenColumns="setHiddenColumns",g.toggleHideAllColumns="toggleHideAllColumns";var Ut=function(e){e.getToggleHiddenProps=[Rr],e.getToggleHideAllColumnsProps=[Pr],e.stateReducers.push(kr),e.useInstanceBeforeDimensions.push(Er),e.headerGroupsDeps.push(function(t,n){var r=n.instance;return[].concat(t,[r.state.hiddenColumns])}),e.useInstance.push(Ir)};Ut.pluginName="useColumnVisibility";var Rr=function(e,t){var n=t.column;return[e,{onChange:function(r){n.toggleHidden(!r.target.checked)},style:{cursor:"pointer"},checked:n.isVisible,title:"Toggle Column Visible"}]},Pr=function(e,t){var n=t.instance;return[e,{onChange:function(r){n.toggleHideAllColumns(!r.target.checked)},style:{cursor:"pointer"},checked:!n.allColumnsHidden&&!n.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!n.allColumnsHidden&&n.state.hiddenColumns.length}]};function kr(e,t,n,r){if(t.type===g.init)return p({hiddenColumns:[]},e);if(t.type===g.resetHiddenColumns)return p({},e,{hiddenColumns:r.initialState.hiddenColumns||[]});if(t.type===g.toggleHideColumn){var i=(t.value!==void 0?t.value:!e.hiddenColumns.includes(t.columnId))?[].concat(e.hiddenColumns,[t.columnId]):e.hiddenColumns.filter(function(o){return o!==t.columnId});return p({},e,{hiddenColumns:i})}return t.type===g.setHiddenColumns?p({},e,{hiddenColumns:Z(t.value,e.hiddenColumns)}):t.type===g.toggleHideAllColumns?p({},e,{hiddenColumns:(t.value!==void 0?t.value:!e.hiddenColumns.length)?r.allColumns.map(function(o){return o.id}):[]}):void 0}function Er(e){var t=e.headers,n=e.state.hiddenColumns;u.useRef(!1).current;var r=0;t.forEach(function(i){return r+=function o(l,f){l.isVisible=f&&!n.includes(l.id);var m=0;return l.headers&&l.headers.length?l.headers.forEach(function(v){return m+=o(v,l.isVisible)}):m=l.isVisible?1:0,l.totalVisibleHeaderCount=m,m}(i,!0)})}function Ir(e){var t=e.columns,n=e.flatHeaders,r=e.dispatch,i=e.allColumns,o=e.getHooks,l=e.state.hiddenColumns,f=e.autoResetHiddenColumns,m=f===void 0||f,v=M(e),x=i.length===l.length,w=u.useCallback(function(C,F){return r({type:g.toggleHideColumn,columnId:C,value:F})},[r]),S=u.useCallback(function(C){return r({type:g.setHiddenColumns,value:C})},[r]),h=u.useCallback(function(C){return r({type:g.toggleHideAllColumns,value:C})},[r]),b=q(o().getToggleHideAllColumnsProps,{instance:v()});n.forEach(function(C){C.toggleHidden=function(F){r({type:g.toggleHideColumn,columnId:C.id,value:F})},C.getToggleHiddenProps=q(o().getToggleHiddenProps,{instance:v(),column:C})});var P=M(m);L(function(){P()&&r({type:g.resetHiddenColumns})},[r,t]),Object.assign(e,{allColumnsHidden:x,toggleHideColumn:w,setHiddenColumns:S,toggleHideAllColumns:h,getToggleHideAllColumnsProps:b})}var Br={},Ar={},Fr=function(e,t,n){return e},Mr=function(e,t){return e.subRows||[]},Or=function(e,t,n){return""+(n?[n.id,t].join("."):t)},Tr=function(e){return e};function Xt(e){var t=e.initialState,n=t===void 0?Br:t,r=e.defaultColumn,i=r===void 0?Ar:r,o=e.getSubRows,l=o===void 0?Mr:o,f=e.getRowId,m=f===void 0?Or:f,v=e.stateReducer,x=v===void 0?Fr:v,w=e.useControlledState,S=w===void 0?Tr:w;return p({},A(e,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:n,defaultColumn:i,getSubRows:l,getRowId:m,stateReducer:x,useControlledState:S})}function Yt(e,t){t===void 0&&(t=0);var n=0,r=0,i=0,o=0;return e.forEach(function(l){var f=l.headers;if(l.totalLeft=t,f&&f.length){var m=Yt(f,t),v=m[0],x=m[1],w=m[2],S=m[3];l.totalMinWidth=v,l.totalWidth=x,l.totalMaxWidth=w,l.totalFlexWidth=S}else l.totalMinWidth=l.minWidth,l.totalWidth=Math.min(Math.max(l.minWidth,l.width),l.maxWidth),l.totalMaxWidth=l.maxWidth,l.totalFlexWidth=l.canResize?l.totalWidth:0;l.isVisible&&(t+=l.totalWidth,n+=l.totalMinWidth,r+=l.totalWidth,i+=l.totalMaxWidth,o+=l.totalFlexWidth)}),[n,r,i,o]}function Gr(e){var t=e.data,n=e.rows,r=e.flatRows,i=e.rowsById,o=e.column,l=e.getRowId,f=e.getSubRows,m=e.accessValueHooks,v=e.getInstance;t.forEach(function(x,w){return function S(h,b,P,C,F){P===void 0&&(P=0);var K=h,$=l(h,b,C),E=i[$];if(E)E.subRows&&E.originalSubRows.forEach(function(D,z){return S(D,z,P+1,E)});else if((E={id:$,original:K,index:b,depth:P,cells:[{}]}).cells.map=Je,E.cells.filter=Je,E.cells.forEach=Je,E.cells[0].getCellProps=Je,E.values={},F.push(E),r.push(E),i[$]=E,E.originalSubRows=f(h,b),E.originalSubRows){var ce=[];E.originalSubRows.forEach(function(D,z){return S(D,z,P+1,E,ce)}),E.subRows=ce}o.accessor&&(E.values[o.id]=o.accessor(h,b,E,F,t)),E.values[o.id]=X(m,E.values[o.id],{row:E,column:o,instance:v()})}(x,w,0,void 0,n)})}g.resetExpanded="resetExpanded",g.toggleRowExpanded="toggleRowExpanded",g.toggleAllRowsExpanded="toggleAllRowsExpanded";var Jt=function(e){e.getToggleAllRowsExpandedProps=[Dr],e.getToggleRowExpandedProps=[zr],e.stateReducers.push(Vr),e.useInstance.push(Hr),e.prepareRow.push(Wr)};Jt.pluginName="useExpanded";var Dr=function(e,t){var n=t.instance;return[e,{onClick:function(r){n.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},zr=function(e,t){var n=t.row;return[e,{onClick:function(){n.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function Vr(e,t,n,r){if(t.type===g.init)return p({expanded:{}},e);if(t.type===g.resetExpanded)return p({},e,{expanded:r.initialState.expanded||{}});if(t.type===g.toggleAllRowsExpanded){var i=t.value,o=r.isAllRowsExpanded,l=r.rowsById;if(i!==void 0?i:!o){var f={};return Object.keys(l).forEach(function(b){f[b]=!0}),p({},e,{expanded:f})}return p({},e,{expanded:{}})}if(t.type===g.toggleRowExpanded){var m,v=t.id,x=t.value,w=e.expanded[v],S=x!==void 0?x:!w;if(!w&&S)return p({},e,{expanded:p({},e.expanded,(m={},m[v]=!0,m))});if(w&&!S){var h=e.expanded;return h[v],p({},e,{expanded:A(h,[v].map(U))})}return e}}function Hr(e){var t=e.data,n=e.rows,r=e.rowsById,i=e.manualExpandedKey,o=i===void 0?"expanded":i,l=e.paginateExpandedRows,f=l===void 0||l,m=e.expandSubRows,v=m===void 0||m,x=e.autoResetExpanded,w=x===void 0||x,S=e.getHooks,h=e.plugins,b=e.state.expanded,P=e.dispatch;te(h,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var C=M(w),F=Boolean(Object.keys(r).length&&Object.keys(b).length);F&&Object.keys(r).some(function(Y){return!b[Y]})&&(F=!1),L(function(){C()&&P({type:g.resetExpanded})},[P,t]);var K=u.useCallback(function(Y,O){P({type:g.toggleRowExpanded,id:Y,value:O})},[P]),$=u.useCallback(function(Y){return P({type:g.toggleAllRowsExpanded,value:Y})},[P]),E=u.useMemo(function(){return f?dt(n,{manualExpandedKey:o,expanded:b,expandSubRows:v}):n},[f,n,o,b,v]),ce=u.useMemo(function(){return function(Y){var O=0;return Object.keys(Y).forEach(function(G){var ie=G.split(".");O=Math.max(O,ie.length)}),O}(b)},[b]),D=M(e),z=q(S().getToggleAllRowsExpandedProps,{instance:D()});Object.assign(e,{preExpandedRows:n,expandedRows:E,rows:E,expandedDepth:ce,isAllRowsExpanded:F,toggleRowExpanded:K,toggleAllRowsExpanded:$,getToggleAllRowsExpandedProps:z})}function Wr(e,t){var n=t.instance.getHooks,r=t.instance;e.toggleRowExpanded=function(i){return r.toggleRowExpanded(e.id,i)},e.getToggleRowExpandedProps=q(n().getToggleRowExpandedProps,{instance:r,row:e})}var Zt=function(e,t,n){return e=e.filter(function(r){return t.some(function(i){var o=r.values[i];return String(o).toLowerCase().includes(String(n).toLowerCase())})})};Zt.autoRemove=function(e){return!e};var en=function(e,t,n){return e.filter(function(r){return t.some(function(i){var o=r.values[i];return o===void 0||String(o).toLowerCase()===String(n).toLowerCase()})})};en.autoRemove=function(e){return!e};var tn=function(e,t,n){return e.filter(function(r){return t.some(function(i){var o=r.values[i];return o===void 0||String(o)===String(n)})})};tn.autoRemove=function(e){return!e};var nn=function(e,t,n){return e.filter(function(r){return t.some(function(i){return r.values[i].includes(n)})})};nn.autoRemove=function(e){return!e||!e.length};var rn=function(e,t,n){return e.filter(function(r){return t.some(function(i){var o=r.values[i];return o&&o.length&&n.every(function(l){return o.includes(l)})})})};rn.autoRemove=function(e){return!e||!e.length};var on=function(e,t,n){return e.filter(function(r){return t.some(function(i){var o=r.values[i];return o&&o.length&&n.some(function(l){return o.includes(l)})})})};on.autoRemove=function(e){return!e||!e.length};var an=function(e,t,n){return e.filter(function(r){return t.some(function(i){var o=r.values[i];return n.includes(o)})})};an.autoRemove=function(e){return!e||!e.length};var sn=function(e,t,n){return e.filter(function(r){return t.some(function(i){return r.values[i]===n})})};sn.autoRemove=function(e){return e===void 0};var ln=function(e,t,n){return e.filter(function(r){return t.some(function(i){return r.values[i]==n})})};ln.autoRemove=function(e){return e==null};var un=function(e,t,n){var r=n||[],i=r[0],o=r[1];if((i=typeof i=="number"?i:-1/0)>(o=typeof o=="number"?o:1/0)){var l=i;i=o,o=l}return e.filter(function(f){return t.some(function(m){var v=f.values[m];return v>=i&&v<=o})})};un.autoRemove=function(e){return!e||typeof e[0]!="number"&&typeof e[1]!="number"};var ot=Object.freeze({__proto__:null,text:Zt,exactText:en,exactTextCase:tn,includes:nn,includesAll:rn,includesSome:on,includesValue:an,exact:sn,equals:ln,between:un});g.resetFilters="resetFilters",g.setFilter="setFilter",g.setAllFilters="setAllFilters";var cn=function(e){e.stateReducers.push(qr),e.useInstance.push(Lr)};function qr(e,t,n,r){if(t.type===g.init)return p({filters:[]},e);if(t.type===g.resetFilters)return p({},e,{filters:r.initialState.filters||[]});if(t.type===g.setFilter){var i=t.columnId,o=t.filterValue,l=r.allColumns,f=r.filterTypes,m=l.find(function(P){return P.id===i});if(!m)throw new Error("React-Table: Could not find a column with id: "+i);var v=Qe(m.filter,f||{},ot),x=e.filters.find(function(P){return P.id===i}),w=Z(o,x&&x.value);return nt(v.autoRemove,w,m)?p({},e,{filters:e.filters.filter(function(P){return P.id!==i})}):p({},e,x?{filters:e.filters.map(function(P){return P.id===i?{id:i,value:w}:P})}:{filters:[].concat(e.filters,[{id:i,value:w}])})}if(t.type===g.setAllFilters){var S=t.filters,h=r.allColumns,b=r.filterTypes;return p({},e,{filters:Z(S,e.filters).filter(function(P){var C=h.find(function(F){return F.id===P.id});return!nt(Qe(C.filter,b||{},ot).autoRemove,P.value,C)})})}}function Lr(e){var t=e.data,n=e.rows,r=e.flatRows,i=e.rowsById,o=e.allColumns,l=e.filterTypes,f=e.manualFilters,m=e.defaultCanFilter,v=m!==void 0&&m,x=e.disableFilters,w=e.state.filters,S=e.dispatch,h=e.autoResetFilters,b=h===void 0||h,P=u.useCallback(function(D,z){S({type:g.setFilter,columnId:D,filterValue:z})},[S]),C=u.useCallback(function(D){S({type:g.setAllFilters,filters:D})},[S]);o.forEach(function(D){var z=D.id,Y=D.accessor,O=D.defaultCanFilter,G=D.disableFilters;D.canFilter=Y?Se(G!==!0&&void 0,x!==!0&&void 0,!0):Se(O,v,!1),D.setFilter=function(V){return P(D.id,V)};var ie=w.find(function(V){return V.id===z});D.filterValue=ie&&ie.value});var F=u.useMemo(function(){if(f||!w.length)return[n,r,i];var D=[],z={};return[function Y(O,G){G===void 0&&(G=0);var ie=O;return(ie=w.reduce(function(V,ae){var ne=ae.id,de=ae.value,B=o.find(function(fe){return fe.id===ne});if(!B)return V;G===0&&(B.preFilteredRows=V);var ee=Qe(B.filter,l||{},ot);return ee?(B.filteredRows=ee(V,[ne],de),B.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+B.id+"."),V)},O)).forEach(function(V){D.push(V),z[V.id]=V,V.subRows&&(V.subRows=V.subRows&&V.subRows.length>0?Y(V.subRows,G+1):V.subRows)}),ie}(n),D,z]},[f,w,n,r,i,o,l]),K=F[0],$=F[1],E=F[2];u.useMemo(function(){o.filter(function(D){return!w.find(function(z){return z.id===D.id})}).forEach(function(D){D.preFilteredRows=K,D.filteredRows=K})},[K,w,o]);var ce=M(b);L(function(){ce()&&S({type:g.resetFilters})},[S,f?null:t]),Object.assign(e,{preFilteredRows:n,preFilteredFlatRows:r,preFilteredRowsById:i,filteredRows:K,filteredFlatRows:$,filteredRowsById:E,rows:K,flatRows:$,rowsById:E,setFilter:P,setAllFilters:C})}cn.pluginName="useFilters",g.resetGlobalFilter="resetGlobalFilter",g.setGlobalFilter="setGlobalFilter";var dn=function(e){e.stateReducers.push(Nr),e.useInstance.push(jr)};function Nr(e,t,n,r){if(t.type===g.resetGlobalFilter)return p({},e,{globalFilter:r.initialState.globalFilter||void 0});if(t.type===g.setGlobalFilter){var i=t.filterValue,o=r.userFilterTypes,l=Qe(r.globalFilter,o||{},ot),f=Z(i,e.globalFilter);return nt(l.autoRemove,f)?(e.globalFilter,A(e,["globalFilter"])):p({},e,{globalFilter:f})}}function jr(e){var t=e.data,n=e.rows,r=e.flatRows,i=e.rowsById,o=e.allColumns,l=e.filterTypes,f=e.globalFilter,m=e.manualGlobalFilter,v=e.state.globalFilter,x=e.dispatch,w=e.autoResetGlobalFilter,S=w===void 0||w,h=e.disableGlobalFilter,b=u.useCallback(function(E){x({type:g.setGlobalFilter,filterValue:E})},[x]),P=u.useMemo(function(){if(m||v===void 0)return[n,r,i];var E=[],ce={},D=Qe(f,l||{},ot);if(!D)return console.warn("Could not find a valid 'globalFilter' option."),n;o.forEach(function(Y){var O=Y.disableGlobalFilter;Y.canFilter=Se(O!==!0&&void 0,h!==!0&&void 0,!0)});var z=o.filter(function(Y){return Y.canFilter===!0});return[function Y(O){return(O=D(O,z.map(function(G){return G.id}),v)).forEach(function(G){E.push(G),ce[G.id]=G,G.subRows=G.subRows&&G.subRows.length?Y(G.subRows):G.subRows}),O}(n),E,ce]},[m,v,f,l,o,n,r,i,h]),C=P[0],F=P[1],K=P[2],$=M(S);L(function(){$()&&x({type:g.resetGlobalFilter})},[x,m?null:t]),Object.assign(e,{preGlobalFilteredRows:n,preGlobalFilteredFlatRows:r,preGlobalFilteredRowsById:i,globalFilteredRows:C,globalFilteredFlatRows:F,globalFilteredRowsById:K,rows:C,flatRows:F,rowsById:K,setGlobalFilter:b,disableGlobalFilter:h})}function gn(e,t){return t.reduce(function(n,r){return n+(typeof r=="number"?r:0)},0)}dn.pluginName="useGlobalFilter";var pn=Object.freeze({__proto__:null,sum:gn,min:function(e){var t=e[0]||0;return e.forEach(function(n){typeof n=="number"&&(t=Math.min(t,n))}),t},max:function(e){var t=e[0]||0;return e.forEach(function(n){typeof n=="number"&&(t=Math.max(t,n))}),t},minMax:function(e){var t=e[0]||0,n=e[0]||0;return e.forEach(function(r){typeof r=="number"&&(t=Math.min(t,r),n=Math.max(n,r))}),t+".."+n},average:function(e){return gn(0,e)/e.length},median:function(e){if(!e.length)return null;var t=Math.floor(e.length/2),n=[].concat(e).sort(function(r,i){return r-i});return e.length%2!=0?n[t]:(n[t-1]+n[t])/2},unique:function(e){return Array.from(new Set(e).values())},uniqueCount:function(e){return new Set(e).size},count:function(e){return e.length}}),Qr=[],$r={};g.resetGroupBy="resetGroupBy",g.setGroupBy="setGroupBy",g.toggleGroupBy="toggleGroupBy";var fn=function(e){e.getGroupByToggleProps=[_r],e.stateReducers.push(Kr),e.visibleColumnsDeps.push(function(t,n){var r=n.instance;return[].concat(t,[r.state.groupBy])}),e.visibleColumns.push(Ur),e.useInstance.push(Yr),e.prepareRow.push(Jr)};fn.pluginName="useGroupBy";var _r=function(e,t){var n=t.header;return[e,{onClick:n.canGroupBy?function(r){r.persist(),n.toggleGroupBy()}:void 0,style:{cursor:n.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function Kr(e,t,n,r){if(t.type===g.init)return p({groupBy:[]},e);if(t.type===g.resetGroupBy)return p({},e,{groupBy:r.initialState.groupBy||[]});if(t.type===g.setGroupBy)return p({},e,{groupBy:t.value});if(t.type===g.toggleGroupBy){var i=t.columnId,o=t.value,l=o!==void 0?o:!e.groupBy.includes(i);return p({},e,l?{groupBy:[].concat(e.groupBy,[i])}:{groupBy:e.groupBy.filter(function(f){return f!==i})})}}function Ur(e,t){var n=t.instance.state.groupBy,r=n.map(function(o){return e.find(function(l){return l.id===o})}).filter(Boolean),i=e.filter(function(o){return!n.includes(o.id)});return(e=[].concat(r,i)).forEach(function(o){o.isGrouped=n.includes(o.id),o.groupedIndex=n.indexOf(o.id)}),e}var Xr={};function Yr(e){var t=e.data,n=e.rows,r=e.flatRows,i=e.rowsById,o=e.allColumns,l=e.flatHeaders,f=e.groupByFn,m=f===void 0?mn:f,v=e.manualGroupBy,x=e.aggregations,w=x===void 0?Xr:x,S=e.plugins,h=e.state.groupBy,b=e.dispatch,P=e.autoResetGroupBy,C=P===void 0||P,F=e.disableGroupBy,K=e.defaultCanGroupBy,$=e.getHooks;te(S,["useColumnOrder","useFilters"],"useGroupBy");var E=M(e);o.forEach(function(B){var ee=B.accessor,fe=B.defaultGroupBy,xe=B.disableGroupBy;B.canGroupBy=ee?Se(B.canGroupBy,xe!==!0&&void 0,F!==!0&&void 0,!0):Se(B.canGroupBy,fe,K,!1),B.canGroupBy&&(B.toggleGroupBy=function(){return e.toggleGroupBy(B.id)}),B.Aggregated=B.Aggregated||B.Cell});var ce=u.useCallback(function(B,ee){b({type:g.toggleGroupBy,columnId:B,value:ee})},[b]),D=u.useCallback(function(B){b({type:g.setGroupBy,value:B})},[b]);l.forEach(function(B){B.getGroupByToggleProps=q($().getGroupByToggleProps,{instance:E(),header:B})});var z=u.useMemo(function(){if(v||!h.length)return[n,r,i,Qr,$r,r,i];var B=h.filter(function(be){return o.find(function(We){return We.id===be})}),ee=[],fe={},xe=[],T={},ge=[],ve={},Ce=function be(We,qe,On){if(qe===void 0&&(qe=0),qe===B.length)return We;var Tt=B[qe],Wo=m(We,Tt);return Object.entries(Wo).map(function(Tn,qo){var Gn=Tn[0],ft=Tn[1],mt=Tt+":"+Gn,Dn=be(ft,qe+1,mt=On?On+">"+mt:mt),zn=qe?De(ft,"leafRows"):ft,Lo=function(Be,Gt,jo){var vt={};return o.forEach(function(he){if(B.includes(he.id))vt[he.id]=Gt[0]?Gt[0].values[he.id]:null;else{var Vn=typeof he.aggregate=="function"?he.aggregate:w[he.aggregate]||pn[he.aggregate];if(Vn){var Qo=Gt.map(function(ht){return ht.values[he.id]}),$o=Be.map(function(ht){var Dt=ht.values[he.id];if(!jo&&he.aggregateValue){var Hn=typeof he.aggregateValue=="function"?he.aggregateValue:w[he.aggregateValue]||pn[he.aggregateValue];if(!Hn)throw console.info({column:he}),new Error("React Table: Invalid column.aggregateValue option for column listed above");Dt=Hn(Dt,ht,he)}return Dt});vt[he.id]=Vn($o,Qo)}else{if(he.aggregate)throw console.info({column:he}),new Error("React Table: Invalid column.aggregate option for column listed above");vt[he.id]=null}}}),vt}(zn,ft,qe),No={id:mt,isGrouped:!0,groupByID:Tt,groupByVal:Gn,values:Lo,subRows:Dn,leafRows:zn,depth:qe,index:qo};return Dn.forEach(function(Be){ee.push(Be),fe[Be.id]=Be,Be.isGrouped?(xe.push(Be),T[Be.id]=Be):(ge.push(Be),ve[Be.id]=Be)}),No})}(n);return Ce.forEach(function(be){ee.push(be),fe[be.id]=be,be.isGrouped?(xe.push(be),T[be.id]=be):(ge.push(be),ve[be.id]=be)}),[Ce,ee,fe,xe,T,ge,ve]},[v,h,n,r,i,o,w,m]),Y=z[0],O=z[1],G=z[2],ie=z[3],V=z[4],ae=z[5],ne=z[6],de=M(C);L(function(){de()&&b({type:g.resetGroupBy})},[b,v?null:t]),Object.assign(e,{preGroupedRows:n,preGroupedFlatRow:r,preGroupedRowsById:i,groupedRows:Y,groupedFlatRows:O,groupedRowsById:G,onlyGroupedFlatRows:ie,onlyGroupedRowsById:V,nonGroupedFlatRows:ae,nonGroupedRowsById:ne,rows:Y,flatRows:O,rowsById:G,toggleGroupBy:ce,setGroupBy:D})}function Jr(e){e.allCells.forEach(function(t){var n;t.isGrouped=t.column.isGrouped&&t.column.id===e.groupByID,t.isPlaceholder=!t.isGrouped&&t.column.isGrouped,t.isAggregated=!t.isGrouped&&!t.isPlaceholder&&((n=e.subRows)==null?void 0:n.length)})}function mn(e,t){return e.reduce(function(n,r,i){var o=""+r.values[t];return n[o]=Array.isArray(n[o])?n[o]:[],n[o].push(r),n},{})}var vn=/([0-9]+)/gm;function Bt(e,t){return e===t?0:e>t?1:-1}function at(e,t,n){return[e.values[n],t.values[n]]}function hn(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}var Zr=Object.freeze({__proto__:null,alphanumeric:function(e,t,n){var r=at(e,t,n),i=r[0],o=r[1];for(i=hn(i),o=hn(o),i=i.split(vn).filter(Boolean),o=o.split(vn).filter(Boolean);i.length&&o.length;){var l=i.shift(),f=o.shift(),m=parseInt(l,10),v=parseInt(f,10),x=[m,v].sort();if(isNaN(x[0])){if(l>f)return 1;if(f>l)return-1}else{if(isNaN(x[1]))return isNaN(m)?-1:1;if(m>v)return 1;if(v>m)return-1}}return i.length-o.length},datetime:function(e,t,n){var r=at(e,t,n),i=r[0],o=r[1];return Bt(i=i.getTime(),o=o.getTime())},basic:function(e,t,n){var r=at(e,t,n);return Bt(r[0],r[1])},string:function(e,t,n){var r=at(e,t,n),i=r[0],o=r[1];for(i=i.split("").filter(Boolean),o=o.split("").filter(Boolean);i.length&&o.length;){var l=i.shift(),f=o.shift(),m=l.toLowerCase(),v=f.toLowerCase();if(m>v)return 1;if(v>m)return-1;if(l>f)return 1;if(f>l)return-1}return i.length-o.length},number:function(e,t,n){var r=at(e,t,n),i=r[0],o=r[1],l=/[^0-9.]/gi;return Bt(i=Number(String(i).replace(l,"")),o=Number(String(o).replace(l,"")))}});g.resetSortBy="resetSortBy",g.setSortBy="setSortBy",g.toggleSortBy="toggleSortBy",g.clearSortBy="clearSortBy",j.sortType="alphanumeric",j.sortDescFirst=!1;var yn=function(e){e.getSortByToggleProps=[eo],e.stateReducers.push(to),e.useInstance.push(no)};yn.pluginName="useSortBy";var eo=function(e,t){var n=t.instance,r=t.column,i=n.isMultiSortEvent,o=i===void 0?function(l){return l.shiftKey}:i;return[e,{onClick:r.canSort?function(l){l.persist(),r.toggleSortBy(void 0,!n.disableMultiSort&&o(l))}:void 0,style:{cursor:r.canSort?"pointer":void 0},title:r.canSort?"Toggle SortBy":void 0}]};function to(e,t,n,r){if(t.type===g.init)return p({sortBy:[]},e);if(t.type===g.resetSortBy)return p({},e,{sortBy:r.initialState.sortBy||[]});if(t.type===g.clearSortBy)return p({},e,{sortBy:e.sortBy.filter(function(E){return E.id!==t.columnId})});if(t.type===g.setSortBy)return p({},e,{sortBy:t.sortBy});if(t.type===g.toggleSortBy){var i,o=t.columnId,l=t.desc,f=t.multi,m=r.allColumns,v=r.disableMultiSort,x=r.disableSortRemove,w=r.disableMultiRemove,S=r.maxMultiSortColCount,h=S===void 0?Number.MAX_SAFE_INTEGER:S,b=e.sortBy,P=m.find(function(E){return E.id===o}).sortDescFirst,C=b.find(function(E){return E.id===o}),F=b.findIndex(function(E){return E.id===o}),K=l!=null,$=[];return(i=!v&&f?C?"toggle":"add":F!==b.length-1||b.length!==1?"replace":C?"toggle":"replace")!=="toggle"||x||K||f&&w||!(C&&C.desc&&!P||!C.desc&&P)||(i="remove"),i==="replace"?$=[{id:o,desc:K?l:P}]:i==="add"?($=[].concat(b,[{id:o,desc:K?l:P}])).splice(0,$.length-h):i==="toggle"?$=b.map(function(E){return E.id===o?p({},E,{desc:K?l:!C.desc}):E}):i==="remove"&&($=b.filter(function(E){return E.id!==o})),p({},e,{sortBy:$})}}function no(e){var t=e.data,n=e.rows,r=e.flatRows,i=e.allColumns,o=e.orderByFn,l=o===void 0?bn:o,f=e.sortTypes,m=e.manualSortBy,v=e.defaultCanSort,x=e.disableSortBy,w=e.flatHeaders,S=e.state.sortBy,h=e.dispatch,b=e.plugins,P=e.getHooks,C=e.autoResetSortBy,F=C===void 0||C;te(b,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var K=u.useCallback(function(O){h({type:g.setSortBy,sortBy:O})},[h]),$=u.useCallback(function(O,G,ie){h({type:g.toggleSortBy,columnId:O,desc:G,multi:ie})},[h]),E=M(e);w.forEach(function(O){var G=O.accessor,ie=O.canSort,V=O.disableSortBy,ae=O.id,ne=G?Se(V!==!0&&void 0,x!==!0&&void 0,!0):Se(v,ie,!1);O.canSort=ne,O.canSort&&(O.toggleSortBy=function(B,ee){return $(O.id,B,ee)},O.clearSortBy=function(){h({type:g.clearSortBy,columnId:O.id})}),O.getSortByToggleProps=q(P().getSortByToggleProps,{instance:E(),column:O});var de=S.find(function(B){return B.id===ae});O.isSorted=!!de,O.sortedIndex=S.findIndex(function(B){return B.id===ae}),O.isSortedDesc=O.isSorted?de.desc:void 0});var ce=u.useMemo(function(){if(m||!S.length)return[n,r];var O=[],G=S.filter(function(ie){return i.find(function(V){return V.id===ie.id})});return[function ie(V){var ae=l(V,G.map(function(ne){var de=i.find(function(fe){return fe.id===ne.id});if(!de)throw new Error("React-Table: Could not find a column with id: "+ne.id+" while sorting");var B=de.sortType,ee=je(B)||(f||{})[B]||Zr[B];if(!ee)throw new Error("React-Table: Could not find a valid sortType of '"+B+"' for column '"+ne.id+"'.");return function(fe,xe){return ee(fe,xe,ne.id,ne.desc)}}),G.map(function(ne){var de=i.find(function(B){return B.id===ne.id});return de&&de.sortInverted?ne.desc:!ne.desc}));return ae.forEach(function(ne){O.push(ne),ne.subRows&&ne.subRows.length!==0&&(ne.subRows=ie(ne.subRows))}),ae}(n),O]},[m,S,n,r,i,l,f]),D=ce[0],z=ce[1],Y=M(F);L(function(){Y()&&h({type:g.resetSortBy})},[m?null:t]),Object.assign(e,{preSortedRows:n,preSortedFlatRows:r,sortedRows:D,sortedFlatRows:z,rows:D,flatRows:z,setSortBy:K,toggleSortBy:$})}function bn(e,t,n){return[].concat(e).sort(function(r,i){for(var o=0;o<t.length;o+=1){var l=t[o],f=n[o]===!1||n[o]==="desc",m=l(r,i);if(m!==0)return f?-m:m}return n[0]?r.index-i.index:i.index-r.index})}g.resetPage="resetPage",g.gotoPage="gotoPage",g.setPageSize="setPageSize";var wn=function(e){e.stateReducers.push(ro),e.useInstance.push(oo)};function ro(e,t,n,r){if(t.type===g.init)return p({pageSize:10,pageIndex:0},e);if(t.type===g.resetPage)return p({},e,{pageIndex:r.initialState.pageIndex||0});if(t.type===g.gotoPage){var i=r.pageCount,o=r.page,l=Z(t.pageIndex,e.pageIndex),f=!1;return l>e.pageIndex?f=i===-1?o.length>=e.pageSize:l<i:l<e.pageIndex&&(f=l>-1),f?p({},e,{pageIndex:l}):e}if(t.type===g.setPageSize){var m=t.pageSize,v=e.pageSize*e.pageIndex;return p({},e,{pageIndex:Math.floor(v/m),pageSize:m})}}function oo(e){var t=e.rows,n=e.autoResetPage,r=n===void 0||n,i=e.manualExpandedKey,o=i===void 0?"expanded":i,l=e.plugins,f=e.pageCount,m=e.paginateExpandedRows,v=m===void 0||m,x=e.expandSubRows,w=x===void 0||x,S=e.state,h=S.pageSize,b=S.pageIndex,P=S.expanded,C=S.globalFilter,F=S.filters,K=S.groupBy,$=S.sortBy,E=e.dispatch,ce=e.data,D=e.manualPagination;te(l,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var z=M(r);L(function(){z()&&E({type:g.resetPage})},[E,D?null:ce,C,F,K,$]);var Y=D?f:Math.ceil(t.length/h),O=u.useMemo(function(){return Y>0?[].concat(new Array(Y)).fill(null).map(function(ee,fe){return fe}):[]},[Y]),G=u.useMemo(function(){var ee;if(D)ee=t;else{var fe=h*b,xe=fe+h;ee=t.slice(fe,xe)}return v?ee:dt(ee,{manualExpandedKey:o,expanded:P,expandSubRows:w})},[w,P,o,D,b,h,v,t]),ie=b>0,V=Y===-1?G.length>=h:b<Y-1,ae=u.useCallback(function(ee){E({type:g.gotoPage,pageIndex:ee})},[E]),ne=u.useCallback(function(){return ae(function(ee){return ee-1})},[ae]),de=u.useCallback(function(){return ae(function(ee){return ee+1})},[ae]),B=u.useCallback(function(ee){E({type:g.setPageSize,pageSize:ee})},[E]);Object.assign(e,{pageOptions:O,pageCount:Y,page:G,canPreviousPage:ie,canNextPage:V,gotoPage:ae,previousPage:ne,nextPage:de,setPageSize:B})}wn.pluginName="usePagination",g.resetPivot="resetPivot",g.togglePivot="togglePivot";var Sn=function(e){e.getPivotToggleProps=[ao],e.stateReducers.push(io),e.useInstanceAfterData.push(so),e.allColumns.push(lo),e.accessValue.push(uo),e.materializedColumns.push(co),e.materializedColumnsDeps.push(go),e.visibleColumns.push(po),e.visibleColumnsDeps.push(fo),e.useInstance.push(mo),e.prepareRow.push(vo)};Sn.pluginName="usePivotColumns";var xn=[],ao=function(e,t){var n=t.header;return[e,{onClick:n.canPivot?function(r){r.persist(),n.togglePivot()}:void 0,style:{cursor:n.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function io(e,t,n,r){if(t.type===g.init)return p({pivotColumns:xn},e);if(t.type===g.resetPivot)return p({},e,{pivotColumns:r.initialState.pivotColumns||xn});if(t.type===g.togglePivot){var i=t.columnId,o=t.value,l=o!==void 0?o:!e.pivotColumns.includes(i);return p({},e,l?{pivotColumns:[].concat(e.pivotColumns,[i])}:{pivotColumns:e.pivotColumns.filter(function(f){return f!==i})})}}function so(e){e.allColumns.forEach(function(t){t.isPivotSource=e.state.pivotColumns.includes(t.id)})}function lo(e,t){var n=t.instance;return e.forEach(function(r){r.isPivotSource=n.state.pivotColumns.includes(r.id),r.uniqueValues=new Set}),e}function uo(e,t){var n=t.column;return n.uniqueValues&&e!==void 0&&n.uniqueValues.add(e),e}function co(e,t){var n=t.instance,r=n.allColumns,i=n.state;if(!i.pivotColumns.length||!i.groupBy||!i.groupBy.length)return e;var o=i.pivotColumns.map(function(m){return r.find(function(v){return v.id===m})}).filter(Boolean),l=r.filter(function(m){return!m.isPivotSource&&!i.groupBy.includes(m.id)&&!i.pivotColumns.includes(m.id)}),f=le(function m(v,x,w){v===void 0&&(v=0),w===void 0&&(w=[]);var S=o[v];return S?Array.from(S.uniqueValues).sort().map(function(h){var b=p({},S,{Header:S.PivotHeader||typeof S.header=="string"?S.Header+": "+h:h,isPivotGroup:!0,parent:x,depth:v,id:x?x.id+"."+S.id+"."+h:S.id+"."+h,pivotValue:h});return b.columns=m(v+1,b,[].concat(w,[function(P){return P.values[S.id]===h}])),b}):l.map(function(h){return p({},h,{canPivot:!1,isPivoted:!0,parent:x,depth:v,id:""+(x?x.id+"."+h.id:h.id),accessor:function(b,P,C){if(w.every(function(F){return F(C)}))return C.values[h.id]}})})}());return[].concat(e,f)}function go(e,t){var n=t.instance.state,r=n.pivotColumns,i=n.groupBy;return[].concat(e,[r,i])}function po(e,t){var n=t.instance.state;return e=e.filter(function(r){return!r.isPivotSource}),n.pivotColumns.length&&n.groupBy&&n.groupBy.length&&(e=e.filter(function(r){return r.isGrouped||r.isPivoted})),e}function fo(e,t){var n=t.instance;return[].concat(e,[n.state.pivotColumns,n.state.groupBy])}function mo(e){var t=e.columns,n=e.allColumns,r=e.flatHeaders,i=e.getHooks,o=e.plugins,l=e.dispatch,f=e.autoResetPivot,m=f===void 0||f,v=e.manaulPivot,x=e.disablePivot,w=e.defaultCanPivot;te(o,["useGroupBy"],"usePivotColumns");var S=M(e);n.forEach(function(b){var P=b.accessor,C=b.defaultPivot,F=b.disablePivot;b.canPivot=P?Se(b.canPivot,F!==!0&&void 0,x!==!0&&void 0,!0):Se(b.canPivot,C,w,!1),b.canPivot&&(b.togglePivot=function(){return e.togglePivot(b.id)}),b.Aggregated=b.Aggregated||b.Cell}),r.forEach(function(b){b.getPivotToggleProps=q(i().getPivotToggleProps,{instance:S(),header:b})});var h=M(m);L(function(){h()&&l({type:g.resetPivot})},[l,v?null:t]),Object.assign(e,{togglePivot:function(b,P){l({type:g.togglePivot,columnId:b,value:P})}})}function vo(e){e.allCells.forEach(function(t){t.isPivoted=t.column.isPivoted})}g.resetSelectedRows="resetSelectedRows",g.toggleAllRowsSelected="toggleAllRowsSelected",g.toggleRowSelected="toggleRowSelected",g.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var Cn=function(e){e.getToggleRowSelectedProps=[ho],e.getToggleAllRowsSelectedProps=[yo],e.getToggleAllPageRowsSelectedProps=[bo],e.stateReducers.push(wo),e.useInstance.push(So),e.prepareRow.push(xo)};Cn.pluginName="useRowSelect";var ho=function(e,t){var n=t.instance,r=t.row,i=n.manualRowSelectedKey,o=i===void 0?"isSelected":i;return[e,{onChange:function(l){r.toggleRowSelected(l.target.checked)},style:{cursor:"pointer"},checked:!(!r.original||!r.original[o])||r.isSelected,title:"Toggle Row Selected",indeterminate:r.isSomeSelected}]},yo=function(e,t){var n=t.instance;return[e,{onChange:function(r){n.toggleAllRowsSelected(r.target.checked)},style:{cursor:"pointer"},checked:n.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:Boolean(!n.isAllRowsSelected&&Object.keys(n.state.selectedRowIds).length)}]},bo=function(e,t){var n=t.instance;return[e,{onChange:function(r){n.toggleAllPageRowsSelected(r.target.checked)},style:{cursor:"pointer"},checked:n.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:Boolean(!n.isAllPageRowsSelected&&n.page.some(function(r){var i=r.id;return n.state.selectedRowIds[i]}))}]};function wo(e,t,n,r){if(t.type===g.init)return p({selectedRowIds:{}},e);if(t.type===g.resetSelectedRows)return p({},e,{selectedRowIds:r.initialState.selectedRowIds||{}});if(t.type===g.toggleAllRowsSelected){var i=t.value,o=r.isAllRowsSelected,l=r.rowsById,f=r.nonGroupedRowsById,m=f===void 0?l:f,v=i!==void 0?i:!o,x=Object.assign({},e.selectedRowIds);return v?Object.keys(m).forEach(function(ae){x[ae]=!0}):Object.keys(m).forEach(function(ae){delete x[ae]}),p({},e,{selectedRowIds:x})}if(t.type===g.toggleRowSelected){var w=t.id,S=t.value,h=r.rowsById,b=r.selectSubRows,P=b===void 0||b,C=r.getSubRows,F=e.selectedRowIds[w],K=S!==void 0?S:!F;if(F===K)return e;var $=p({},e.selectedRowIds);return function ae(ne){var de=h[ne];if(de.isGrouped||(K?$[ne]=!0:delete $[ne]),P&&C(de))return C(de).forEach(function(B){return ae(B.id)})}(w),p({},e,{selectedRowIds:$})}if(t.type===g.toggleAllPageRowsSelected){var E=t.value,ce=r.page,D=r.rowsById,z=r.selectSubRows,Y=z===void 0||z,O=r.isAllPageRowsSelected,G=r.getSubRows,ie=E!==void 0?E:!O,V=p({},e.selectedRowIds);return ce.forEach(function(ae){return function ne(de){var B=D[de];if(B.isGrouped||(ie?V[de]=!0:delete V[de]),Y&&G(B))return G(B).forEach(function(ee){return ne(ee.id)})}(ae.id)}),p({},e,{selectedRowIds:V})}return e}function So(e){var t=e.data,n=e.rows,r=e.getHooks,i=e.plugins,o=e.rowsById,l=e.nonGroupedRowsById,f=l===void 0?o:l,m=e.autoResetSelectedRows,v=m===void 0||m,x=e.state.selectedRowIds,w=e.selectSubRows,S=w===void 0||w,h=e.dispatch,b=e.page,P=e.getSubRows;te(i,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var C=u.useMemo(function(){var G=[];return n.forEach(function(ie){var V=S?function ae(ne,de,B){if(de[ne.id])return!0;var ee=B(ne);if(ee&&ee.length){var fe=!0,xe=!1;return ee.forEach(function(T){xe&&!fe||(ae(T,de,B)?xe=!0:fe=!1)}),!!fe||!!xe&&null}return!1}(ie,x,P):!!x[ie.id];ie.isSelected=!!V,ie.isSomeSelected=V===null,V&&G.push(ie)}),G},[n,S,x,P]),F=Boolean(Object.keys(f).length&&Object.keys(x).length),K=F;F&&Object.keys(f).some(function(G){return!x[G]})&&(F=!1),F||b&&b.length&&b.some(function(G){var ie=G.id;return!x[ie]})&&(K=!1);var $=M(v);L(function(){$()&&h({type:g.resetSelectedRows})},[h,t]);var E=u.useCallback(function(G){return h({type:g.toggleAllRowsSelected,value:G})},[h]),ce=u.useCallback(function(G){return h({type:g.toggleAllPageRowsSelected,value:G})},[h]),D=u.useCallback(function(G,ie){return h({type:g.toggleRowSelected,id:G,value:ie})},[h]),z=M(e),Y=q(r().getToggleAllRowsSelectedProps,{instance:z()}),O=q(r().getToggleAllPageRowsSelectedProps,{instance:z()});Object.assign(e,{selectedFlatRows:C,isAllRowsSelected:F,isAllPageRowsSelected:K,toggleRowSelected:D,toggleAllRowsSelected:E,getToggleAllRowsSelectedProps:Y,getToggleAllPageRowsSelectedProps:O,toggleAllPageRowsSelected:ce})}function xo(e,t){var n=t.instance;e.toggleRowSelected=function(r){return n.toggleRowSelected(e.id,r)},e.getToggleRowSelectedProps=q(n.getHooks().getToggleRowSelectedProps,{instance:n,row:e})}var Rn=function(e){return{}},Pn=function(e){return{}};g.setRowState="setRowState",g.setCellState="setCellState",g.resetRowState="resetRowState";var kn=function(e){e.stateReducers.push(Co),e.useInstance.push(Ro),e.prepareRow.push(Po)};function Co(e,t,n,r){var i=r.initialRowStateAccessor,o=i===void 0?Rn:i,l=r.initialCellStateAccessor,f=l===void 0?Pn:l,m=r.rowsById;if(t.type===g.init)return p({rowState:{}},e);if(t.type===g.resetRowState)return p({},e,{rowState:r.initialState.rowState||{}});if(t.type===g.setRowState){var v,x=t.rowId,w=t.value,S=e.rowState[x]!==void 0?e.rowState[x]:o(m[x]);return p({},e,{rowState:p({},e.rowState,(v={},v[x]=Z(w,S),v))})}if(t.type===g.setCellState){var h,b,P,C,F,K=t.rowId,$=t.columnId,E=t.value,ce=e.rowState[K]!==void 0?e.rowState[K]:o(m[K]),D=(ce==null||(h=ce.cellState)==null?void 0:h[$])!==void 0?ce.cellState[$]:f((b=m[K])==null||(P=b.cells)==null?void 0:P.find(function(z){return z.column.id===$}));return p({},e,{rowState:p({},e.rowState,(F={},F[K]=p({},ce,{cellState:p({},ce.cellState||{},(C={},C[$]=Z(E,D),C))}),F))})}}function Ro(e){var t=e.autoResetRowState,n=t===void 0||t,r=e.data,i=e.dispatch,o=u.useCallback(function(m,v){return i({type:g.setRowState,rowId:m,value:v})},[i]),l=u.useCallback(function(m,v,x){return i({type:g.setCellState,rowId:m,columnId:v,value:x})},[i]),f=M(n);L(function(){f()&&i({type:g.resetRowState})},[r]),Object.assign(e,{setRowState:o,setCellState:l})}function Po(e,t){var n=t.instance,r=n.initialRowStateAccessor,i=r===void 0?Rn:r,o=n.initialCellStateAccessor,l=o===void 0?Pn:o,f=n.state.rowState;e&&(e.state=f[e.id]!==void 0?f[e.id]:i(e),e.setState=function(m){return n.setRowState(e.id,m)},e.cells.forEach(function(m){e.state.cellState||(e.state.cellState={}),m.state=e.state.cellState[m.column.id]!==void 0?e.state.cellState[m.column.id]:l(m),m.setState=function(v){return n.setCellState(e.id,m.column.id,v)}}))}kn.pluginName="useRowState",g.resetColumnOrder="resetColumnOrder",g.setColumnOrder="setColumnOrder";var En=function(e){e.stateReducers.push(ko),e.visibleColumnsDeps.push(function(t,n){var r=n.instance;return[].concat(t,[r.state.columnOrder])}),e.visibleColumns.push(Eo),e.useInstance.push(Io)};function ko(e,t,n,r){return t.type===g.init?p({columnOrder:[]},e):t.type===g.resetColumnOrder?p({},e,{columnOrder:r.initialState.columnOrder||[]}):t.type===g.setColumnOrder?p({},e,{columnOrder:Z(t.columnOrder,e.columnOrder)}):void 0}function Eo(e,t){var n=t.instance.state.columnOrder;if(!n||!n.length)return e;for(var r=[].concat(n),i=[].concat(e),o=[],l=function(){var f=r.shift(),m=i.findIndex(function(v){return v.id===f});m>-1&&o.push(i.splice(m,1)[0])};i.length&&r.length;)l();return[].concat(o,i)}function Io(e){var t=e.dispatch;e.setColumnOrder=u.useCallback(function(n){return t({type:g.setColumnOrder,columnOrder:n})},[t])}En.pluginName="useColumnOrder",j.canResize=!0,g.columnStartResizing="columnStartResizing",g.columnResizing="columnResizing",g.columnDoneResizing="columnDoneResizing",g.resetResize="resetResize";var In=function(e){e.getResizerProps=[Bo],e.getHeaderProps.push({style:{position:"relative"}}),e.stateReducers.push(Ao),e.useInstance.push(Mo),e.useInstanceBeforeDimensions.push(Fo)},Bo=function(e,t){var n=t.instance,r=t.header,i=n.dispatch,o=function(l,f){var m=!1;if(l.type==="touchstart"){if(l.touches&&l.touches.length>1)return;m=!0}var v=function(C){var F=[];return function K($){$.columns&&$.columns.length&&$.columns.map(K),F.push($)}(C),F}(f).map(function(C){return[C.id,C.totalWidth]}),x=m?Math.round(l.touches[0].clientX):l.clientX,w=function(C){i({type:g.columnResizing,clientX:C})},S=function(){return i({type:g.columnDoneResizing})},h={mouse:{moveEvent:"mousemove",moveHandler:function(C){return w(C.clientX)},upEvent:"mouseup",upHandler:function(C){document.removeEventListener("mousemove",h.mouse.moveHandler),document.removeEventListener("mouseup",h.mouse.upHandler),S()}},touch:{moveEvent:"touchmove",moveHandler:function(C){return C.cancelable&&(C.preventDefault(),C.stopPropagation()),w(C.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(C){document.removeEventListener(h.touch.moveEvent,h.touch.moveHandler),document.removeEventListener(h.touch.upEvent,h.touch.moveHandler),S()}}},b=m?h.touch:h.mouse,P=!!function(){if(typeof ze=="boolean")return ze;var C=!1;try{var F={get passive(){return C=!0,!1}};window.addEventListener("test",null,F),window.removeEventListener("test",null,F)}catch{C=!1}return ze=C}()&&{passive:!1};document.addEventListener(b.moveEvent,b.moveHandler,P),document.addEventListener(b.upEvent,b.upHandler,P),i({type:g.columnStartResizing,columnId:f.id,columnWidth:f.totalWidth,headerIdWidths:v,clientX:x})};return[e,{onMouseDown:function(l){return l.persist()||o(l,r)},onTouchStart:function(l){return l.persist()||o(l,r)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function Ao(e,t){if(t.type===g.init)return p({columnResizing:{columnWidths:{}}},e);if(t.type===g.resetResize)return p({},e,{columnResizing:{columnWidths:{}}});if(t.type===g.columnStartResizing){var n=t.clientX,r=t.columnId,i=t.columnWidth,o=t.headerIdWidths;return p({},e,{columnResizing:p({},e.columnResizing,{startX:n,headerIdWidths:o,columnWidth:i,isResizingColumn:r})})}if(t.type===g.columnResizing){var l=t.clientX,f=e.columnResizing,m=f.startX,v=f.columnWidth,x=f.headerIdWidths,w=(l-m)/v,S={};return(x===void 0?[]:x).forEach(function(h){var b=h[0],P=h[1];S[b]=Math.max(P+P*w,0)}),p({},e,{columnResizing:p({},e.columnResizing,{columnWidths:p({},e.columnResizing.columnWidths,{},S)})})}return t.type===g.columnDoneResizing?p({},e,{columnResizing:p({},e.columnResizing,{startX:null,isResizingColumn:null})}):void 0}In.pluginName="useResizeColumns";var Fo=function(e){var t=e.flatHeaders,n=e.disableResizing,r=e.getHooks,i=e.state.columnResizing,o=M(e);t.forEach(function(l){var f=Se(l.disableResizing!==!0&&void 0,n!==!0&&void 0,!0);l.canResize=f,l.width=i.columnWidths[l.id]||l.originalWidth||l.width,l.isResizing=i.isResizingColumn===l.id,f&&(l.getResizerProps=q(r().getResizerProps,{instance:o(),header:l}))})};function Mo(e){var t=e.plugins,n=e.dispatch,r=e.autoResetResize,i=r===void 0||r,o=e.columns;te(t,["useAbsoluteLayout"],"useResizeColumns");var l=M(i);L(function(){l()&&n({type:g.resetResize})},[o]);var f=u.useCallback(function(){return n({type:g.resetResize})},[n]);Object.assign(e,{resetResizing:f})}var At={position:"absolute",top:0},Bn=function(e){e.getTableBodyProps.push(pt),e.getRowProps.push(pt),e.getHeaderGroupProps.push(pt),e.getFooterGroupProps.push(pt),e.getHeaderProps.push(function(t,n){var r=n.column;return[t,{style:p({},At,{left:r.totalLeft+"px",width:r.totalWidth+"px"})}]}),e.getCellProps.push(function(t,n){var r=n.cell;return[t,{style:p({},At,{left:r.column.totalLeft+"px",width:r.column.totalWidth+"px"})}]}),e.getFooterProps.push(function(t,n){var r=n.column;return[t,{style:p({},At,{left:r.totalLeft+"px",width:r.totalWidth+"px"})}]})};Bn.pluginName="useAbsoluteLayout";var pt=function(e,t){return[e,{style:{position:"relative",width:t.instance.totalColumnsWidth+"px"}}]},Ft={display:"inline-block",boxSizing:"border-box"},Mt=function(e,t){return[e,{style:{display:"flex",width:t.instance.totalColumnsWidth+"px"}}]},An=function(e){e.getRowProps.push(Mt),e.getHeaderGroupProps.push(Mt),e.getFooterGroupProps.push(Mt),e.getHeaderProps.push(function(t,n){var r=n.column;return[t,{style:p({},Ft,{width:r.totalWidth+"px"})}]}),e.getCellProps.push(function(t,n){var r=n.cell;return[t,{style:p({},Ft,{width:r.column.totalWidth+"px"})}]}),e.getFooterProps.push(function(t,n){var r=n.column;return[t,{style:p({},Ft,{width:r.totalWidth+"px"})}]})};function Fn(e){e.getTableProps.push(Oo),e.getRowProps.push(Ot),e.getHeaderGroupProps.push(Ot),e.getFooterGroupProps.push(Ot),e.getHeaderProps.push(To),e.getCellProps.push(Go),e.getFooterProps.push(Do)}An.pluginName="useBlockLayout",Fn.pluginName="useFlexLayout";var Oo=function(e,t){return[e,{style:{minWidth:t.instance.totalColumnsMinWidth+"px"}}]},Ot=function(e,t){return[e,{style:{display:"flex",flex:"1 0 auto",minWidth:t.instance.totalColumnsMinWidth+"px"}}]},To=function(e,t){var n=t.column;return[e,{style:{boxSizing:"border-box",flex:n.totalFlexWidth?n.totalFlexWidth+" 0 auto":void 0,minWidth:n.totalMinWidth+"px",width:n.totalWidth+"px"}}]},Go=function(e,t){var n=t.cell;return[e,{style:{boxSizing:"border-box",flex:n.column.totalFlexWidth+" 0 auto",minWidth:n.column.totalMinWidth+"px",width:n.column.totalWidth+"px"}}]},Do=function(e,t){var n=t.column;return[e,{style:{boxSizing:"border-box",flex:n.totalFlexWidth?n.totalFlexWidth+" 0 auto":void 0,minWidth:n.totalMinWidth+"px",width:n.totalWidth+"px"}}]};function Mn(e){e.stateReducers.push(Ho),e.getTableProps.push(zo),e.getHeaderProps.push(Vo)}Mn.pluginName="useGridLayout";var zo=function(e,t){return[e,{style:{display:"grid",gridTemplateColumns:t.instance.state.gridLayout.columnWidths.map(function(n){return n}).join(" ")}}]},Vo=function(e,t){return[e,{id:"header-cell-"+t.column.id,style:{position:"sticky"}}]};function Ho(e,t,n,r){if(t.type==="init")return p({gridLayout:{columnWidths:r.columns.map(function(){return"auto"})}},e);if(t.type==="columnStartResizing"){var i=t.columnId,o=r.visibleColumns.findIndex(function(h){return h.id===i}),l=function(h){var b,P=(b=document.getElementById("header-cell-"+h))==null?void 0:b.offsetWidth;if(P!==void 0)return P}(i);return l!==void 0?p({},e,{gridLayout:p({},e.gridLayout,{columnId:i,columnIndex:o,startingWidth:l})}):e}if(t.type==="columnResizing"){var f=e.gridLayout,m=f.columnIndex,v=f.startingWidth,x=f.columnWidths,w=v-(e.columnResizing.startX-t.clientX),S=[].concat(x);return S[m]=w+"px",p({},e,{gridLayout:p({},e.gridLayout,{columnWidths:S})})}}s._UNSTABLE_usePivotColumns=Sn,s.actions=g,s.defaultColumn=j,s.defaultGroupByFn=mn,s.defaultOrderByFn=bn,s.defaultRenderer=H,s.emptyRenderer=W,s.ensurePluginOrder=te,s.flexRender=Pe,s.functionalUpdate=Z,s.loopHooks=se,s.makePropGetter=q,s.makeRenderer=oe,s.reduceHooks=X,s.safeUseLayoutEffect=Q,s.useAbsoluteLayout=Bn,s.useAsyncDebounce=function(e,t){t===void 0&&(t=0);var n=u.useRef({}),r=M(e),i=M(t);return u.useCallback(function(){var o=R(regeneratorRuntime.mark(function l(){var f,m,v,x=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:for(f=x.length,m=new Array(f),v=0;v<f;v++)m[v]=x[v];return n.current.promise||(n.current.promise=new Promise(function(S,h){n.current.resolve=S,n.current.reject=h})),n.current.timeout&&clearTimeout(n.current.timeout),n.current.timeout=setTimeout(R(regeneratorRuntime.mark(function S(){return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return delete n.current.timeout,h.prev=1,h.t0=n.current,h.next=5,r().apply(void 0,m);case 5:h.t1=h.sent,h.t0.resolve.call(h.t0,h.t1),h.next=12;break;case 9:h.prev=9,h.t2=h.catch(1),n.current.reject(h.t2);case 12:return h.prev=12,delete n.current.promise,h.finish(12);case 15:case"end":return h.stop()}},S,null,[[1,9,12,15]])})),i()),w.abrupt("return",n.current.promise);case 5:case"end":return w.stop()}},l)}));return function(){return o.apply(this,arguments)}}(),[r,i])},s.useBlockLayout=An,s.useColumnOrder=En,s.useExpanded=Jt,s.useFilters=cn,s.useFlexLayout=Fn,s.useGetLatest=M,s.useGlobalFilter=dn,s.useGridLayout=Mn,s.useGroupBy=fn,s.useMountedLayoutEffect=L,s.usePagination=wn,s.useResizeColumns=In,s.useRowSelect=Cn,s.useRowState=kn,s.useSortBy=yn,s.useTable=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=Xt(e),n=[Ut].concat(n);var i=u.useRef({}),o=M(i.current);Object.assign(o(),p({},e,{plugins:n,hooks:Cr()})),n.filter(Boolean).forEach(function(T){T(o().hooks)});var l=M(o().hooks);o().getHooks=l,delete o().hooks,Object.assign(o(),X(l().useOptions,Xt(e)));var f=o(),m=f.data,v=f.columns,x=f.initialState,w=f.defaultColumn,S=f.getSubRows,h=f.getRowId,b=f.stateReducer,P=f.useControlledState,C=M(b),F=u.useCallback(function(T,ge){if(!ge.type)throw console.info({action:ge}),new Error("Unknown Action \u{1F446}");return[].concat(l().stateReducers,Array.isArray(C())?C():[C()]).reduce(function(ve,Ce){return Ce(ve,ge,T,o())||ve},T)},[l,C,o]),K=u.useReducer(F,void 0,function(){return F(x,{type:g.init})}),$=K[0],E=K[1],ce=X([].concat(l().useControlledState,[P]),$,{instance:o()});Object.assign(o(),{state:ce,dispatch:E});var D=u.useMemo(function(){return _(X(l().columns,v,{instance:o()}))},[l,o,v].concat(X(l().columnsDeps,[],{instance:o()})));o().columns=D;var z=u.useMemo(function(){return X(l().allColumns,le(D),{instance:o()}).map(k)},[D,l,o].concat(X(l().allColumnsDeps,[],{instance:o()})));o().allColumns=z;var Y=u.useMemo(function(){for(var T=[],ge=[],ve={},Ce=[].concat(z);Ce.length;){var be=Ce.shift();Gr({data:m,rows:T,flatRows:ge,rowsById:ve,column:be,getRowId:h,getSubRows:S,accessValueHooks:l().accessValue,getInstance:o})}return[T,ge,ve]},[z,m,h,S,l,o]),O=Y[0],G=Y[1],ie=Y[2];Object.assign(o(),{rows:O,initialRows:[].concat(O),flatRows:G,rowsById:ie}),se(l().useInstanceAfterData,o());var V=u.useMemo(function(){return X(l().visibleColumns,z,{instance:o()}).map(function(T){return ue(T,w)})},[l,z,o,w].concat(X(l().visibleColumnsDeps,[],{instance:o()})));z=u.useMemo(function(){var T=[].concat(V);return z.forEach(function(ge){T.find(function(ve){return ve.id===ge.id})||T.push(ge)}),T},[z,V]),o().allColumns=z;var ae=u.useMemo(function(){return X(l().headerGroups,pe(V,w),o())},[l,V,w,o].concat(X(l().headerGroupsDeps,[],{instance:o()})));o().headerGroups=ae;var ne=u.useMemo(function(){return ae.length?ae[0].headers:[]},[ae]);o().headers=ne,o().flatHeaders=ae.reduce(function(T,ge){return[].concat(T,ge.headers)},[]),se(l().useInstanceBeforeDimensions,o());var de=V.filter(function(T){return T.isVisible}).map(function(T){return T.id}).sort().join("_");V=u.useMemo(function(){return V.filter(function(T){return T.isVisible})},[V,de]),o().visibleColumns=V;var B=Yt(ne),ee=B[0],fe=B[1],xe=B[2];return o().totalColumnsMinWidth=ee,o().totalColumnsWidth=fe,o().totalColumnsMaxWidth=xe,se(l().useInstance,o()),[].concat(o().flatHeaders,o().allColumns).forEach(function(T){T.render=oe(o(),T),T.getHeaderProps=q(l().getHeaderProps,{instance:o(),column:T}),T.getFooterProps=q(l().getFooterProps,{instance:o(),column:T})}),o().headerGroups=u.useMemo(function(){return ae.filter(function(T,ge){return T.headers=T.headers.filter(function(ve){return ve.headers?function Ce(be){return be.filter(function(We){return We.headers?Ce(We.headers):We.isVisible}).length}(ve.headers):ve.isVisible}),!!T.headers.length&&(T.getHeaderGroupProps=q(l().getHeaderGroupProps,{instance:o(),headerGroup:T,index:ge}),T.getFooterGroupProps=q(l().getFooterGroupProps,{instance:o(),headerGroup:T,index:ge}),!0)})},[ae,o,l]),o().footerGroups=[].concat(o().headerGroups).reverse(),o().prepareRow=u.useCallback(function(T){T.getRowProps=q(l().getRowProps,{instance:o(),row:T}),T.allCells=z.map(function(ge){var ve=T.values[ge.id],Ce={column:ge,row:T,value:ve};return Ce.getCellProps=q(l().getCellProps,{instance:o(),cell:Ce}),Ce.render=oe(o(),ge,{row:T,cell:Ce,value:ve}),Ce}),T.cells=V.map(function(ge){return T.allCells.find(function(ve){return ve.column.id===ge.id})}),se(l().prepareRow,T,{instance:o()})},[l,o,z,V]),o().getTableProps=q(l().getTableProps,{instance:o()}),o().getTableBodyProps=q(l().getTableBodyProps,{instance:o()}),se(l().useFinalInstance,o()),o()},Object.defineProperty(s,"__esModule",{value:!0})})})(Qt,Qt.exports);Ct.exports=Qt.exports;const li=s=>{var u=s,{isAscending:a}=u,c=Re(u,["isAscending"]);return I(we,re(N({h:"auto",w:4},c),{viewBox:"0 0 16 16",children:[d("path",{d:"M10.267 7.467v5.6M13.067 10.267l-2.8 2.8-2.8-2.8",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",stroke:a?"var(--chakra-colors-yellow-200)":"var(--chakra-colors-gray-300)"}),d("path",{d:"M4.2 7.194V1.205M1.205 4.2L4.2 1.205 7.194 4.2",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",stroke:a?"var(--chakra-colors-gray-300)":"var(--chakra-colors-yellow-200)"})]}))},ui=({onGotoFirstPage:a,onNextPage:c,onPreviousPage:s,onGotoLastPage:u,canNextPage:y,canPreviousPage:R,onPageResize:p,totalPages:A,currentPage:U})=>I(bt,{align:"center",width:"fit-content",justifyContent:"flex-end",grow:1,children:[d(Fe,{display:{base:"none",lg:"flex"},fontSize:"sm",mr:2,children:"Mostrando"}),d(Un,{display:{base:"none",lg:"flex"},onChange:g=>{p(+g.target.value)},flexBasis:"fit-content",size:"sm",variant:"flushed",children:[10,20,30,40,50].map(g=>d("option",{value:g,children:g},g))}),I(Fe,{mx:5,fontSize:"sm",children:["P\xE1gina"," ",d(Fe,{as:"strong",color:"yellow.200",children:U})," ","/ ",A]}),I(Kn,{isAttached:!0,size:"sm",children:[d(Ve,{"aria-label":"Primer p\xE1gina",title:"Primer p\xE1gina",onClick:a,disabled:!R,icon:d(we,{as:na})}),d(Ve,{"aria-label":"P\xE1gina anterior",title:"P\xE1gina anterior",onClick:s,disabled:!R,icon:d(we,{as:ra})}),d(Ve,{"aria-label":"P\xE1gina siguiente",title:"P\xE1gina siguiente",onClick:c,disabled:!y,icon:d(we,{as:oa})}),d(Ve,{"aria-label":"Ultima p\xE1gina",title:"Ultima p\xE1gina",onClick:u,disabled:!y,icon:d(we,{as:aa})})]})]}),ci=y=>{var R=y,{allColumns:a,indeterminate:c,checked:s}=R,u=Re(R,["allColumns","indeterminate","checked"]);return I(ia,{children:[d(sa,{children:d(Ve,{"aria-label":"Columnas",title:"Columnas",variant:"ghost",icon:d(la,{})})}),d(Xn,{children:I(ua,{maxW:"max-content",children:[d(ca,{}),d(da,{fontWeight:600,children:"Columnas"}),d(ga,{}),I(pa,{maxW:"max-content",children:[d(Yn,re(N({},u),{isIndeterminate:c,isChecked:s,children:"Ver todas"})),d(fa,{px:6,mt:1,spacing:1,maxW:"max-content",children:a.map(p=>d(Yn,re(N({size:"sm",isChecked:p.getToggleHiddenProps().checked},p.getToggleHiddenProps()),{children:p.Header}),`${p.id}_checkbox`))})]})]})})]})};function di({headers:a,data:c,isLoading:s}){const u=me.exports.useMemo(()=>a.map(_=>{const le=({value:k})=>{switch(_.accessor){case"code":return d(Fe,{fontWeight:600,textAlign:"right",children:k});case"price":return d(Fe,{textAlign:"right",children:k});case"updatedAt":case"orderedAt":return d(Fe,{textAlign:"center",children:k?new Date(k).toLocaleDateString("es-ES",{year:"numeric",day:"2-digit",month:"2-digit"}):"-"});case"provider":case"category":return String((k==null?void 0:k.name)||"-");default:return String(k)==="true"?d(Fe,{textAlign:"center",children:"Si"}):String(k)==="false"?d(Fe,{textAlign:"center",children:"No"}):String(k)}};return{Header:_.label,accessor:_.accessor,Cell:le}}),[a]),y=me.exports.useRef(null);me.exports.useEffect(()=>{var _;c&&((_=y.current)==null||_.scrollIntoView({behavior:"smooth"}))},[c]);const R=me.exports.useMemo(()=>s?new Array(10).fill(0):c,[c,s]),p=Ct.exports.useTable({columns:u,data:R,initialState:{hiddenColumns:["blankMaxStock","blankMinStock","unregisteredMaxStock","unregisteredMinStock","updatedAt","orderedAt","category","provider"],sortBy:[{id:"code",desc:!1},{id:"qty",desc:!1}]},disableSortRemove:!0,autoResetSortBy:!1},Ct.exports.useSortBy,Ct.exports.usePagination),{allColumns:A,getTableProps:U,getTableBodyProps:g,headerGroups:H,page:W,prepareRow:j,getToggleHideAllColumnsProps:J,canPreviousPage:q,canNextPage:X,pageOptions:se,pageCount:te,gotoPage:Z,nextPage:M,previousPage:Q,setPageSize:L,rows:oe,state:{pageIndex:Pe}}=p;return I(Ze,{display:"block",maxW:"100%",m:"auto",boxShadow:"dark-lg",p:5,ref:y,children:[d(Fe,{color:"yellow.200",textAlign:"end",fontWeight:200,children:`${oe.length} resultado${oe.length>1?"s":""}`}),d(Ge,{maxW:"100%",maxH:{base:"70vh",lg:"100vh"},overflow:"auto",display:"block",children:I(ma,re(N({},U()),{w:"100%",colorScheme:"teal",children:[d(va,{children:H.map(_=>d(Jn,re(N({},_.getHeaderGroupProps()),{position:"sticky",top:0,overflow:"auto",bg:"gray.900",boxShadow:"xl",zIndex:1,children:_.headers.map(le=>{const k=le.id==="code";return d(ha,re(N({},le.getHeaderProps(le.getSortByToggleProps({title:"Ordenar"}))),{backgroundClip:"padding-box",position:k?"sticky":void 0,left:k?0:void 0,bg:k?"gray.900":void 0,boxShadow:k?"xl":void 0,children:I(Fe,{display:"flex",align:"center",alignItems:"center",children:[le.render("Header"),le.isSorted&&d(li,{isAscending:!le.isSortedDesc,ml:1})]})}))})})))}),d(ya,re(N({},g()),{children:W.map(_=>{j(_);const le=_.original.blankStock<_.original.blankMinStock||_.original.unregisteredStock<_.original.unregisteredMinStock,k=_.original.blankStock===_.original.blankMinStock||_.original.unregisteredStock===_.original.unregisteredMinStock;return d(Jn,re(N({},_.getRowProps()),{border:"none",children:_.cells.map(ue=>{const pe=ue.column.id==="code";return d(ba,re(N({},ue.getCellProps()),{position:pe?"sticky":void 0,left:pe?0:void 0,bg:pe?"gray.900":void 0,boxShadow:pe?"xl":void 0,whiteSpace:"nowrap",textAlign:Number.isInteger(ue.value)?"center":"left",children:s?d(Sa,{startColor:"yellow.300",h:2}):I(Ke,{children:[pe&&(le||k)&&d(wa,{label:le?"Stock comprometido":k?"Stock al l\xEDmite":void 0,fontSize:"sm",children:d(we,{color:le?"error":k?"warning":void 0,as:Zn})}),ue.render("Cell")]})}))})}))})}))]}))}),I(Ke,{w:"100%",children:[d(ci,re(N({},J()),{allColumns:A})),d(ui,{onNextPage:M,onPreviousPage:Q,onGotoFirstPage:()=>Z(0),onGotoLastPage:()=>Z(te-1),onPageResize:L,canPreviousPage:q,canNextPage:X,currentPage:Pe+1,totalPages:se.length})]})]})}function $t(a,c){return c?[...c,a]:[a]}function nr(a,c,s){return c?[...c.filter(y=>y[s]!==a[s]),a]:[a]}function rr(a,c,s){if(!!c)return c.filter(u=>u[s]!==a)}const Le={base:["categories"],byId:a=>[...Le.base,(a==null?void 0:a.toString())||""]};function ct(a=!0){return _e(Le.base,async()=>(await ye.get("/categories")).data,{enabled:a})}function gi(a){const c=ke(),s=Te({variant:"top-accent",position:"bottom-left"});return Me(async u=>(await ye.patch(`/categories/${a}`,u)).data,{onSuccess:u=>{c.setQueryData(Le.byId(a),u),c.setQueryData(Le.base,y=>nr(u,y,"id")),s({title:"Categor\xEDa actualizada",status:"success"})},onError:()=>{s({title:"No se pudo actualizar la categoria",status:"error"})}})}function pi(){const a=ke(),c=Te({variant:"top-accent",position:"bottom-left"});return Me(async s=>(await ye.delete(`/categories/${s}`)).data,{onSuccess:(s,u)=>{a.setQueryData(Le.byId(u),()=>{}),a.setQueryData(Le.base,y=>rr(u,y,"id")),c({title:"Categor\xEDa eliminada",status:"success"})},onError:()=>{c({title:"No se pudo eliminar la categoria",status:"error"})}})}function fi(){const a=ke(),c=Te({variant:"top-accent",position:"bottom-left"});return Me(async s=>(await ye.post("/categories",s)).data,{onSuccess:s=>{a.setQueryData(Le.base,u=>$t(s,u)),c({title:"Categor\xEDa agregada",status:"success"})},onError:()=>{c({title:"No se pudo agregar la categoria",status:"error"})}})}const Ne={base:["providers"],byId:a=>[...Ne.base,(a==null?void 0:a.toString())||""]};function tt(a=!0){return _e(Ne.base,async()=>(await ye.get("/providers")).data,{enabled:a})}function mi(a){const c=ke(),s=Te({variant:"top-accent",position:"bottom-left"});return Me(async u=>(await ye.patch(`/providers/${a}`,u)).data,{onSuccess:u=>{c.setQueryData(Ne.byId(a),u),c.setQueryData(Ne.base,y=>nr(u,y,"id")),s({title:"Proveedor actualizado",status:"success"})},onError:()=>{s({title:"No se pudo actualizar el proveedor",status:"error"})}})}function vi(){const a=ke(),c=Te({variant:"top-accent",position:"bottom-left"});return Me(async s=>(await ye.delete(`/providers/${s}`)).data,{onSuccess:(s,u)=>{a.setQueryData(Ne.byId(u),()=>{}),a.setQueryData(Ne.base,y=>rr(u,y,"id")),c({title:"Proveedor eliminado",status:"success"})},onError:()=>{c({title:"No se pudo eliminar el proveedor",status:"error"})}})}function hi(){const a=ke(),c=Te({variant:"top-accent",position:"bottom-left"});return Me(async s=>(await ye.post("/providers",s)).data,{onSuccess:s=>{a.setQueryData(Ne.base,u=>$t(s,u)),c({title:"Proveedor creado",status:"success"})},onError:()=>{c({title:"No se pudo agregar el proveedor",status:"error"})}})}const yi=p=>{var A=p,{kind:a,value:c,children:s,isLoading:u,isError:y}=A,R=Re(A,["kind","value","children","isLoading","isError"]);switch(a){case"checkbox":return d(Pa,re(N({},R),{checked:c,isChecked:c}));case"date":return d(Ht,re(N({},R),{value:c,type:"date",css:Ra`
                  ::-webkit-calendar-picker-indicator {
                     filter: invert(1);
                  }
               `}));case"number":return d(Ht,re(N({},R),{value:c,type:"number",minW:10}));case"text":return d(Ht,re(N({},R),{value:c,type:"search"}));case"select":return d(Xe,re(N({},R),{value:c,withEmptyOption:!0,isLoading:u,isError:y,children:s}));default:return null}},bi=({label:a,accessor:c,options:s,inputKind:u,index:y,control:R,rules:p,register:A,onRemove:U,initialValue:g,removeDisabled:H})=>{const{data:W,isLoading:j,isError:J}=tt(c==="provider"),{data:q,isLoading:X,isError:se}=ct(c==="category"),te=me.exports.useMemo(()=>c==="category"?X:j,[c,X,j]),Z=me.exports.useMemo(()=>c==="category"?se:J,[c,se,J]);return I(Ge,{w:"100%",display:"flex",flexWrap:"wrap",alignItems:"center",gap:3,children:[d(Fe,{minW:32,fontWeight:600,flexBasis:"fit-content",color:"yellow.500",children:a}),I(Ke,{flexGrow:1,children:[s&&d(Un,re(N({},A(`filters.${y}.condition`)),{flex:1,variant:"flushed",w:"min-content",children:s.map(M=>d("option",{value:M.value,children:M.label},`${c}-${M.value}`))})),d(Vt,{rules:N({required:{value:!0,message:"Ingrese un valor"}},p),control:R,defaultValue:g,name:`filters.${y}.value`,render:oe=>{var Pe=oe,{field:_}=Pe,le=_,{ref:M}=le,Q=Re(le,["ref"]),{fieldState:{error:L}}=Pe;return I(xa,{isInvalid:!!(L==null?void 0:L.message),minWidth:20,flex:1,children:[I(yi,re(N({kind:u},Q),{isLoading:te,isError:Z,children:[c==="provider"&&(W==null?void 0:W.map(k=>d("option",{value:k.id,children:k.name},k.id))),c==="category"&&(q==null?void 0:q.map(k=>d("option",{value:k.id,children:k.name},k.id)))]})),d(Ca,{children:L==null?void 0:L.message})]})}}),d(Ve,{display:{base:"none",sm:"block"},disabled:H,"aria-label":"Eliminar",title:"Eliminar",size:"sm",isRound:!0,colorScheme:"red",variant:"link",icon:d(we,{w:5,h:"auto",as:er}),onClick:U})]})]})};function or(a){return a.toISOString().split("T")[0]}const ar=[{label:"Antes de",value:"lt"},{label:"Despues de",value:"gt"},{label:"El d\xEDa",value:"eq"}],_t=[{label:"Mayor o igual",value:"gte"},{label:"Menor o igual",value:"lte"},{label:"Igual",value:"eq"}],Rt=[{label:"Nombre/C\xF3digo",accessor:"name",inputKind:"text",initialValue:""},{label:"Precio [u$S]",accessor:"price",options:_t,inputKind:"number",initialValue:""},{label:"Proveedor",accessor:"provider",inputKind:"select",initialValue:""},{label:"Categor\xEDa",accessor:"category",inputKind:"select",initialValue:""},{label:"Fue pedido",accessor:"didOrder",inputKind:"checkbox",initialValue:!0,rules:{required:!1}},{label:"\xDAltimo pedido",accessor:"orderedAt",options:ar,inputKind:"date",initialValue:or(new Date)},{label:"Stock Capital",accessor:"blankStock",options:_t,inputKind:"number",initialValue:""},{label:"Stock Provincia",accessor:"unregisteredStock",options:_t,inputKind:"number",initialValue:""},{label:"Actualizado",accessor:"updatedAt",options:ar,inputKind:"date",initialValue:or(new Date)}];function wi(a){const c={};return a.filters.map(s=>{switch(s.accessor){case"name":c.searchVal=s.value;break;case"blankStock":s.condition==="gte"&&(c.blankStockMin=Number(s==null?void 0:s.value)),s.condition==="lte"&&(c.blankStockMax=Number(s==null?void 0:s.value)),s.condition==="eq"&&(c.blankStockMax=c.blankStockMin=Number(s==null?void 0:s.value));break;case"unregisteredStock":s.condition==="gte"&&(c.unregisteredStockMin=Number(s==null?void 0:s.value)),s.condition==="lte"&&(c.unregisteredStockMax=Number(s==null?void 0:s.value)),s.condition==="eq"&&(c.unregisteredStockMax=c.unregisteredStockMin=Number(s==null?void 0:s.value));break;case"category":c.categoryId=Number(s==null?void 0:s.value);break;case"provider":c.providerId=Number(s==null?void 0:s.value);break;case"didOrder":c.didOrder=Boolean(s==null?void 0:s.value);break;case"price":s.condition==="gte"&&(c.priceMin=s.value),s.condition==="lte"&&(c.priceMax=s.value),s.condition==="eq"&&(c.priceMax=c.priceMin=s.value);break;case"updatedAt":s.condition==="gt"&&(c.updatedAtFrom=s.value),s.condition==="lt"&&(c.updatedAtTo=s.value),s.condition==="eq"&&(c.updatedAtTo=c.updatedAtFrom=s.value);break;case"orderedAt":s.condition==="gt"&&(c.orderedAtFrom=s.value),s.condition==="lt"&&(c.orderedAtTo=s.value),s.condition==="eq"&&(c.orderedAtTo=c.orderedAtFrom=s.value);break}}),c}const ir="name",Si=({onSearch:a})=>{const c=me.exports.useMemo(()=>{const H=Rt.find(W=>W.accessor===ir);return{filters:[N({},H)]}},[]),{register:s,control:u,handleSubmit:y}=st({defaultValues:c}),{fields:R,remove:p,append:A,replace:U}=wt({control:u,name:"filters"});function g(H){const W=H.filter(j=>R.findIndex(J=>J.accessor===j)<0).map(j=>Rt.find(J=>J.accessor===j));if(W.length)A(W);else{const j=R.findIndex(J=>!H.includes(J.accessor));p(j)}}return d(Ge,{boxShadow:"dark-lg",p:{base:3,sm:6},minW:{base:"100%",md:620},children:I("form",{onSubmit:y(H=>a(H)),children:[d(Ze,{gap:3,children:R.map((H,W)=>{const j=Rt.find(J=>J.accessor===H.accessor);return j?I(zt.Fragment,{children:[d(bi,re(N({},j),{control:u,register:s,index:W,onRemove:()=>p(W),removeDisabled:R.length===1})),d($e,{display:R.length===W+1?"none":void 0})]},H.id):null})}),d($e,{my:6}),I(Ge,{display:"flex",flexWrap:"wrap",w:"100%",gap:3,children:[I(ka,{closeOnSelect:!1,children:[d(Ea,{flexGrow:1,as:Oe,colorScheme:"teal",leftIcon:d(Ia,{}),children:"A\xF1adir Filtro"}),d(Xn,{children:d(Ba,{minW:"fit-content",maxH:"50vh",overflowY:"auto",pr:6,children:d(Aa,{title:"Filtros",type:"checkbox",onChange:H=>g(H),value:R.map(H=>H.accessor),defaultValue:[ir],children:Rt.map(H=>{var W;return d(Fa,{_checked:{svg:{color:"success"}},value:H.accessor,isDisabled:H.accessor===((W=R[0])==null?void 0:W.accessor)&&R.length===1,children:H.label},H.accessor)})})})})]}),d(Ve,{"aria-label":"reestablecer",title:"Reestablecer",flexGrow:0,icon:d(Ma,{}),colorScheme:"red",variant:"outline",type:"reset",onClick:()=>U(c.filters)}),d(Oe,{w:"100%",leftIcon:d(Oa,{}),type:"submit",children:"Buscar"})]})]})})},Pt=({title:a,children:c})=>d(Ta,{children:({isExpanded:s})=>I(Ae,{children:[I(Ga,{role:"group",cursor:"pointer",_expanded:{bg:"yellow.100",color:"yellow.700"},_hover:{bg:"yellow: 700",color:"yellow.100"},children:[s?d(we,{as:Da,color:"yellow.700"}):d(we,{as:St,color:"yellow.100"}),d(lt,{flex:"1",ml:3,textAlign:"left",size:"md",children:a})]}),d(za,{bg:s?"gray.700":void 0,pb:2,w:"100%",children:d(Ge,{children:c})})]})}),sr={name:{maxLength:{value:25,message:"M\xE1ximo 25 caracteres"},required:{value:!0,message:"Este campo es requerido"},setValueAs:a=>a.replace(/\w\S*/g,c=>c.charAt(0).toUpperCase()+c.substr(1).toLowerCase())}};function lr(a){var c;return[{name:"name",label:"Nombre",initialValue:((c=a==null?void 0:a.initialValues)==null?void 0:c.name)||"",required:!0,type:"text"}]}const Kt=s=>{var u=s,{children:a}=u,c=Re(u,["children"]);return d(Oe,re(N({variant:"ghost",w:"100%",iconSpacing:3,justifyContent:"space-between"},c),{children:a}))},kt=s=>{var u=s,{title:a}=u,c=Re(u,["title"]);return d(Kt,re(N({leftIcon:d(St,{}),colorScheme:"green"},c),{children:a||"Alta"}))},Et=s=>{var u=s,{title:a}=u,c=Re(u,["title"]);return d(Kt,re(N({leftIcon:d(Va,{}),colorScheme:"orange"},c),{children:a||"Editar"}))},ur=a=>d(Ve,N({"aria-label":"Borrar",title:"Borrar",variant:"ghost",isRound:!0,size:"sm",icon:d(Ha,{size:"16"}),colorScheme:"teal"},a)),xi=()=>{const[a,c]=Ue(!1);return I(Ae,{children:[d(kt,{onClick:c.on}),d(et,{title:"Agregar Categor\xEDa",submitText:"Agregar",query:fi,rules:sr,onClose:c.off,isOpen:a,fields:lr()})]})},Ci=()=>{const[a,c]=me.exports.useState(""),[s,u]=Ue(!1),{data:y}=ct(s),R=y==null?void 0:y.find(A=>A.id===+a);function p(){u.off(),c("")}return I(Ae,{children:[d(Et,{onClick:u.on}),d(et,{title:"Editar Categor\xEDa",submitText:"Aplicar",query:gi,queryParams:+a,disabled:!a,rules:sr,onClose:p,isOpen:s,fields:lr({initialValues:R}),children:d(Xe,{onChange:A=>c(A.target.value),value:a,bgColor:"primary",color:"blackAlpha.900",fontWeight:600,withEmptyOption:!0,children:y==null?void 0:y.map(A=>d("option",{value:A.id,children:A.name},A.id))})})]})};function cr(a){var c,s,u,y,R,p,A,U,g,H,W,j,J,q,X,se,te,Z,M,Q,L;return[[{initialValue:((c=a==null?void 0:a.initialValues)==null?void 0:c.name)||"",label:"Nombre",name:"name",required:!0,type:"text"},{initialValue:((s=a==null?void 0:a.initialValues)==null?void 0:s.code)||"",label:"C\xF3digo",name:"code",required:!0,type:"text"}],{initialValue:((u=a==null?void 0:a.initialValues)==null?void 0:u.price)||"",label:"Precio",name:"price",required:!0,type:"number"},[{initialValue:((y=a==null?void 0:a.initialValues)==null?void 0:y.qty)||1,label:"Contenido",name:"qty",required:!0,type:"number"},{initialValue:((R=a==null?void 0:a.initialValues)==null?void 0:R.unit)||"g",label:"Unidad",name:"unit",required:!0,type:"select",options:[{label:"g",value:"g"},{label:"kg",value:"kg"},{label:"ml",value:"ml"},{label:"lt",value:"lt"}]}],[{initialValue:((p=a==null?void 0:a.initialValues)==null?void 0:p.providerId)||"",label:"Proveedor",name:"providerId",type:"select",options:(U=(A=a==null?void 0:a.optionFields)==null?void 0:A.providerId)==null?void 0:U.options,isLoadingOptions:(H=(g=a==null?void 0:a.optionFields)==null?void 0:g.providerId)==null?void 0:H.isLoading,withEmptyOption:!0},{initialValue:((W=a==null?void 0:a.initialValues)==null?void 0:W.categoryId)||"",label:"Categor\xEDa",name:"categoryId",type:"select",options:(J=(j=a==null?void 0:a.optionFields)==null?void 0:j.categoryId)==null?void 0:J.options,isLoadingOptions:(X=(q=a==null?void 0:a.optionFields)==null?void 0:q.categoryId)==null?void 0:X.isLoading,withEmptyOption:!0}],[{initialValue:((se=a==null?void 0:a.initialValues)==null?void 0:se.blankStock)||0,label:"Stock Capial",name:"blankStock",required:!0,type:"number"},{initialValue:((te=a==null?void 0:a.initialValues)==null?void 0:te.unregisteredStock)||0,label:"Stock Provincia",name:"unregisteredStock",required:!0,type:"number"}],[{initialValue:((Z=a==null?void 0:a.initialValues)==null?void 0:Z.unregisteredMinStock)||0,label:"Stock M\xEDn. Capital",name:"blankMinStock",required:!0,type:"number"},{initialValue:((M=a==null?void 0:a.initialValues)==null?void 0:M.unregisteredMinStock)||0,label:"Stock M\xEDn. Provincia",name:"unregisteredMinStock",required:!0,type:"number"}],[{initialValue:((Q=a==null?void 0:a.initialValues)==null?void 0:Q.unregisteredMaxStock)||10,label:"Stock M\xE1x. Capital",name:"blankMaxStock",required:!0,type:"number"},{initialValue:((L=a==null?void 0:a.initialValues)==null?void 0:L.unregisteredMaxStock)||10,label:"Stock M\xE1x. Provincia",name:"unregisteredMaxStock",required:!0,type:"number"}]]}const dr={name:{maxLength:{value:25,message:"M\xE1ximo 25 caracteres"},required:{value:!0,message:"Ingrese un nombre"},setValueAs:a=>a.replace(/\w\S*/g,c=>c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())},code:{maxLength:{value:25,message:"M\xE1ximo 25 caracteres"},required:{value:!0,message:"Ingrese un c\xF3digo"}},blankStock:{min:{value:0,message:"M\xEDnimo 0"},max:{value:1e3,message:"M\xE1ximo 1000"},required:{value:!0,message:"Ingrese el stock actual"},valueAsNumber:!0},blankMaxStock:{min:{value:1,message:"M\xEDnimo 1"},max:{value:1e3,message:"M\xE1ximo 1000"},required:{value:!0,message:"Ingrese el stock m\xE1ximo"},valueAsNumber:!0},blankMinStock:{min:{value:0,message:"M\xEDnimo 0"},max:{value:800,message:"M\xE1ximo 800"},required:{value:!0,message:"Ingrese el stock m\xEDnimo"},valueAsNumber:!0},unregisteredStock:{min:{value:0,message:"M\xEDnimo 0"},max:{value:1e3,message:"M\xE1ximo 1000"},required:{value:!0,message:"Ingrese el stock actual"},valueAsNumber:!0},unregisteredMaxStock:{min:{value:1,message:"M\xEDnimo 1"},max:{value:1e3,message:"M\xE1ximo 1000"},required:{value:!0,message:"Ingrese el stock m\xE1ximo"},valueAsNumber:!0},unregisteredMinStock:{min:{value:0,message:"M\xEDnimo 0"},max:{value:800,message:"M\xE1ximo 800"},required:{value:!0,message:"Ingrese el stock m\xEDnimo"},valueAsNumber:!0},price:{min:{value:1,message:"M\xEDnimo u$s 1"},max:{value:999999,message:"M\xE1ximo u$s 999999"},required:{value:!0,message:"Ingrese el precio"}},qty:{min:{value:.1,message:"M\xEDnimo 1"},max:{value:1e4,message:"M\xE1ximo 10000"},required:{value:!0,message:"Ingrese cantidad"},valueAsNumber:!0}},Ri=()=>{const[a,c]=Ue(!1),{data:s,isLoading:u}=ct(a),{data:y,isLoading:R}=tt(a),p=s==null?void 0:s.map(U=>({label:U.name,value:U.id.toString()})),A=y==null?void 0:y.map(U=>({label:U.name,value:U.id.toString()}));return I(Ae,{children:[d(kt,{onClick:c.on}),d(et,{title:"Agregar Producto",submitText:"Agregar",query:si,rules:dr,onClose:c.off,isOpen:a,fields:cr({optionFields:{providerId:{options:A,isLoading:R},categoryId:{options:p,isLoading:u}}})})]})},Pi=()=>{const[a,c]=Ue(!1),[s,u]=me.exports.useState(),{data:y,isLoading:R}=ct(a),{data:p,isLoading:A}=tt(a),{data:U}=oi({code:s,enabled:Boolean(s)}),g=y==null?void 0:y.map(j=>({label:j.name,value:j.id.toString()})),H=p==null?void 0:p.map(j=>({label:j.name,value:j.id.toString()}));function W(){c.off(),u(void 0)}return I(Ae,{children:[d(Et,{onClick:c.on}),d(et,{title:"Editar Producto",submitText:"Aplicar",query:ai,queryParams:s,disabled:!s,rules:dr,isOpen:a,onClose:W,onSuccess:W,fields:cr({initialValues:U,optionFields:{providerId:{options:H,isLoading:A},categoryId:{options:g,isLoading:R}}}),children:d(xt,{showCompoundName:!0,query:Nt,mapOptionsTo:{label:"name",value:"code"},onChange:u,inputProps:{bgColor:"primary",color:"blackAlpha.900",fontWeight:"600"}})})]})};function gr(a){var c,s,u,y;return[{name:"name",label:"Nombre",initialValue:((c=a==null?void 0:a.initialValues)==null?void 0:c.name)||"",required:!0,type:"text"},{name:"email",label:"Email",initialValue:((s=a==null?void 0:a.initialValues)==null?void 0:s.email)||"",required:!1,type:"email"},{name:"phone",label:"Tel\xE9fono",initialValue:((u=a==null?void 0:a.initialValues)==null?void 0:u.phone)||"",required:!1,type:"number"},{name:"address",label:"Direcci\xF3n",initialValue:((y=a==null?void 0:a.initialValues)==null?void 0:y.address)||"",required:!1,type:"text"}]}const pr={name:{maxLength:{value:25,message:"M\xE1ximo 25 caracteres"},required:{value:!0,message:"Ingrese un nombre"},setValueAs:a=>a.replace(/\w\S*/g,c=>c.charAt(0).toUpperCase()+c.substr(1).toLowerCase())},email:{pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},phone:{min:{value:8,message:"Ingrese un tel\xE9fono v\xE1lido"},valueAsNumber:!0}},ki=()=>{const[a,c]=Ue(!1);return I(Ae,{children:[d(kt,{onClick:c.on}),d(et,{title:"Agregar Proveedor",submitText:"Agregar",query:hi,rules:pr,isOpen:a,onClose:c.off,fields:gr()})]})},Ei=()=>{const[a,c]=Ue(!1),[s,u]=me.exports.useState(""),{data:y}=tt(a),R=y==null?void 0:y.find(A=>A.id===+s);function p(){c.off(),u("")}return I(Ae,{children:[d(Et,{onClick:c.on}),d(et,{title:"Editar Proveedor",submitText:"Aplicar",query:mi,queryParams:+s,disabled:!s,rules:pr,isOpen:a,onClose:p,fields:gr({initialValues:R}),children:d(Xe,{onChange:A=>u(A.target.value),value:s,bgColor:"primary",color:"blackAlpha.900",fontWeight:600,withEmptyOption:!0,children:y==null?void 0:y.map(A=>d("option",{value:A.id,children:A.name},A.id))})})]})},Ye={base:["orders"],byId:a=>[...Ye.base,(a==null?void 0:a.toString())||""],filtered:a=>[...Ye.base,"filtered",a]};function Ii({enabled:a,id:c}){return _e(Ye.byId(c),async()=>(await ye.get(`/orders/${c}`)).data,{enabled:a})}function Bi(s){var u=s,{enabled:a=!0}=u,c=Re(u,["enabled"]);const y=Object.entries(c).map(p=>`${p[0]}=${p[1]}`),R=y.join("&");return _e(y.length?Ye.filtered(c):Ye.base,async()=>(await ye.get(`/orders${R?`?${R}`:""}`)).data,{enabled:a})}function Ai(a){const c=ke(),s=Te({variant:"top-accent",position:"bottom-left"});return Me(async u=>(await ye.patch(`/orders/${a}`,u)).data,{onSuccess:()=>{c.invalidateQueries(Ee.base),c.invalidateQueries(Ye.base),s({title:"Pedido ingresado",status:"success"})},onError:()=>{s({title:"No se pudo ingresar el pedido",status:"error"})}})}function Fi(){const a=ke(),c=Te({variant:"top-accent",position:"bottom-left"});return Me(async s=>(await ye.post("/orders",s)).data,{onSuccess:s=>{a.setQueryData(Ye.base,u=>$t(s,u)),c({title:"Pedido creado",status:"success"})},onError:()=>{c({title:"No se pudo crear el pedido",status:"error"})}})}const Mi=()=>{const{isOpen:a,onClose:c,onOpen:s}=it(),{mutate:u,isLoading:y,error:R}=Fi(),{data:p,isLoading:A,isError:U}=tt(a),g=me.exports.useMemo(()=>({providerId:void 0,products:[{blankQty:1,unregisteredQty:1,code:""}]}),[]),{register:H,control:W,formState:{errors:j},watch:J,handleSubmit:q,reset:X,clearErrors:se}=st(),te=J("providerId"),Z=J("products"),M=!(Z==null?void 0:Z.every(k=>!!k.code)),{data:Q}=Nt({enabled:a&&Boolean(te),needStock:!0,providerId:te}),{fields:L,append:oe,remove:Pe,replace:_}=wt({control:W,name:"products"});me.exports.useEffect(()=>{(Q==null?void 0:Q.length)?_(Q.map(k=>{const ue=k.blankMaxStock-k.blankStock,pe=k.unregisteredMaxStock-k.unregisteredStock;return{code:k.code,blankQty:ue,unregisteredQty:pe}})):te&&_(g.products),te||_([]),se()},[se,te,g.products,Q,_]);function le(){c(),X(),_([])}return I(Ae,{children:[d(kt,{onClick:s,title:"Nuevo"}),I(ut,{isOpen:a,onClose:le,title:"Nuevo Pedido",onSubmit:q(k=>u(k,{onSuccess:le})),submitText:"Crear",submitProps:{isDisabled:!te||!L.length||M||!!j.products},isLoading:y,error:Array.isArray(R==null?void 0:R.message)?R==null?void 0:R.message.join(" - "):R==null?void 0:R.message,children:[d(Xe,re(N({isLoading:A,isError:U,withEmptyOption:!0,emptyOptionLabel:"Seleccionar Proveedor"},H("providerId")),{children:p==null?void 0:p.map(k=>d("option",{value:k.id,children:k.name},k.id))})),d($e,{}),L.map((k,ue)=>{var pe,Ie,Se,je,De;return I(Ke,{spacing:4,children:[d(Vt,{rules:{required:"Ingrese un producto"},name:`products.${ue}.code`,control:W,render:({field:{onChange:dt,name:Qe,onBlur:nt,ref:Je,value:ze},fieldState:{error:rt}})=>{var gt;return d(xt,{isRequired:!0,showCompoundName:!0,mapOptionsTo:{label:"name",value:"code"},query:jt,queryParams:{providerId:te},onChange:dt,inputProps:{size:"sm",_disabled:{color:"yellow.300"},onBlur:nt,name:Qe,value:ze},wrapperProps:{flexGrow:1},isDisabled:y,label:"Producto",ref:Je,error:rt==null?void 0:rt.message,initSearchVal:ze&&`${ze} - ${(gt=Q==null?void 0:Q.find(It=>It.code===ze))==null?void 0:gt.name}`})}}),d(He,re(N({},H(`products.${ue}.blankQty`,{min:{message:"M\xEDnimo 0",value:0}})),{data:{label:"Stock Capital",type:"number",required:!0},size:"sm",wrapperProps:{flexBasis:"min-content"},error:(Ie=(pe=j.products)==null?void 0:pe[ue].blankQty)==null?void 0:Ie.message,isLoading:y,textAlign:"center"})),d(He,re(N({},H(`products.${ue}.unregisteredQty`,{min:{message:"M\xEDnimo 0",value:0}})),{data:{label:"Stock Provincia",type:"number",required:!0},size:"sm",wrapperProps:{flexBasis:"min-content"},error:(je=(Se=j.products)==null?void 0:Se[ue].unregisteredQty)==null?void 0:je.message,isLoading:y,textAlign:"center"})),d(ur,{onClick:()=>Pe(ue),alignSelf:((De=j.products)==null?void 0:De[ue])?"center":"flex-end",disabled:L.length===1||y})]},k.id)}),d(Oe,{leftIcon:d(St,{}),colorScheme:"teal",size:"sm",onClick:()=>oe(g.products[0]),disabled:M||!te||y,children:"Agregar"})]})]})},Oi=()=>{const{isOpen:a,onClose:c,onOpen:s}=it(),[u,y]=me.exports.useState(NaN),{data:R}=Ii({id:u,enabled:!!u}),{data:p}=Bi({enabled:a}),{mutate:A,isLoading:U,error:g}=Ai(u),{handleSubmit:H,register:W,control:j,formState:{errors:J},reset:q,clearErrors:X,watch:se}=st(),{fields:te,replace:Z}=wt({control:j,name:"products"});me.exports.useEffect(()=>{R&&Z(R.productInOrder.map(Q=>({code:Q.product.code,blankQty:Q.blankQty,unregisteredQty:Q.unregisteredQty})))},[R,Z]),me.exports.useEffect(()=>{u||Z([])},[u,Z]);function M(){c(),q(),X(),y(NaN)}return I(Ae,{children:[d(Et,{onClick:s,title:"Ingresar"}),I(ut,{title:"Ingresar Pedido",submitText:"Ingresar",onClose:M,isOpen:a,onSubmit:H(Q=>A(Q,{onSuccess:M})),error:Array.isArray(g==null?void 0:g.message)?g==null?void 0:g.message.join(" - "):g==null?void 0:g.message,isLoading:U,submitProps:{disabled:!u||!!J.products},children:[d(Xe,{onChange:Q=>y(Number(Q.target.value)||NaN),value:u.toString(),bgColor:"primary",color:"blackAlpha.900",fontWeight:600,withEmptyOption:!0,children:p==null?void 0:p.map(Q=>d("option",{value:Q.id,children:`${Q.id} - ${Q.provider.name}`},Q.id))}),R&&I(Wa,{gap:3,children:[d(lt,{fontSize:"md",children:R.provider.name}),d($e,{orientation:"vertical",h:"1.5rem"}),I(lt,{fontSize:"md",children:["Creado el"," ",new Date(R.createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"2-digit"})]}),d($e,{orientation:"vertical",h:"1.5rem"}),I(qa,{href:R.file,color:"primary",isExternal:!0,children:["Pedido",d(we,{ml:1,as:La})]})]}),d($e,{}),te.map((Q,L)=>{var _,le,k,ue;const oe=se(`products.${L}`),Pe=+Q.blankQty==+oe.blankQty&&+Q.unregisteredQty==+oe.unregisteredQty;return I(Ke,{children:[d(He,re(N({},W(`products.${L}.code`)),{data:{label:"Producto",type:"text"},variant:"flushed",isDisabled:!0,color:"yellow.300",size:"sm"})),d(He,re(N({},W(`products.${L}.blankQty`,{min:{message:"M\xEDnimo 0",value:0}})),{data:{label:"Stock Capital",type:"number",required:!0},size:"sm",wrapperProps:{flexBasis:"min-content"},error:(le=(_=J.products)==null?void 0:_[L].blankQty)==null?void 0:le.message,isLoading:U,textAlign:"center"})),d(He,re(N({},W(`products.${L}.unregisteredQty`,{min:{message:"M\xEDnimo 0",value:0}})),{data:{label:"Stock Provincia",type:"number",required:!0},size:"sm",wrapperProps:{flexBasis:"min-content"},error:(ue=(k=J.products)==null?void 0:k[L].unregisteredQty)==null?void 0:ue.message,isLoading:U,textAlign:"center"})),d(Ge,{alignSelf:J.products?"center":"flex-end",children:Pe?d(we,{color:"success",fontSize:"xl",as:Na}):d(we,{color:"error",fontSize:"xl",as:er})})]},Q.id)})]})]})},Ti=new Map([[0,"el producto"],[1,"el proveedor"],[2,"la categor\xEDa"]]),Gi=()=>{const[a,c]=Ue(),[s,u]=me.exports.useState(""),[y,R]=me.exports.useState(0),p=ke(),{data:A}=tt(),{data:U}=ct(),{mutate:g,isLoading:H,error:W,reset:j}=pi(),{mutate:J,isLoading:q,error:X,reset:se}=ii(),{mutate:te,isLoading:Z,error:M,reset:Q}=vi();function L(oe){switch(oe.preventDefault(),y){case 0:J(s,{onSuccess:c.off});break;case 1:te(+s,{onSuccess:()=>{p.invalidateQueries(Ne.base),c.off()}});break;case 2:g(+s,{onSuccess:()=>{p.invalidateQueries(Le.base),c.off()}});break;default:throw Error(`Tab with id ${y} does not exist`)}}return I(Ae,{children:[d(Oe,{variant:"ghost",w:"100%",onClick:c.on,leftIcon:d(ja,{}),iconSpacing:3,justifyContent:"space-between",colorScheme:"red",children:"Bajas"}),d(ut,{submitText:"Eliminar",title:"Bajas",onSubmit:L,isOpen:a,onClose:c.off,isLoading:H||q||Z,error:(W==null?void 0:W.message)||(X==null?void 0:X.message)||(M==null?void 0:M.message),submitProps:{disabled:s===""},withConfirmation:!0,confirmationMessage:`Esta seguro de eliminar ${Ti.get(y)}?`,children:I(Qa,{isFitted:!0,variant:"solid-rounded",colorScheme:"yellow",onChange:oe=>{Q(),se(),j(),R(oe)},children:[I($a,{mb:"1em",children:[d(Wt,{children:"Productos"}),d(Wt,{children:"Proveedores"}),d(Wt,{children:"Categorias"})]}),I(_a,{children:[d(qt,{children:d(xt,{showCompoundName:!0,query:jt,mapOptionsTo:{label:"name",value:"code"},onChange:oe=>u(oe||"")})}),d(qt,{children:d(Xe,{onChange:oe=>u(oe.target.value),withEmptyOption:!0,children:A==null?void 0:A.map(oe=>d("option",{value:oe.id,children:oe.name},oe.id))})}),d(qt,{children:d(Xe,{onChange:oe=>u(oe.target.value),withEmptyOption:!0,children:U==null?void 0:U.map(oe=>d("option",{value:oe.id,children:oe.name},oe.id))})})]})]})})]})};function Di(){const a=ke();return Me(async c=>(await ye.post("/products/sale",c)).data,{onSuccess:()=>{a.invalidateQueries(Ee.base)}})}const fr={products:[{code:"",amount:1,type:"blank"}]},zi=()=>{const{isOpen:a,onClose:c,onOpen:s}=it(),{control:u,register:y,handleSubmit:R,formState:{errors:p},reset:A,watch:U}=st({defaultValues:fr,shouldFocusError:!0}),{fields:g,append:H,remove:W}=wt({control:u,name:"products"}),{mutate:j,isLoading:J,error:q}=Di(),X=U("products"),se=!(X==null?void 0:X.every(Z=>!!Z.code));function te(){c(),A()}return I(Ae,{children:[d(Kt,{onClick:s,leftIcon:d(Ka,{}),children:"Nueva Venta"}),I(ut,{submitText:"Enviar",title:"Nueva Venta",onSubmit:R(Z=>j(Z,{onSuccess:te})),isOpen:a,onClose:te,size:"2xl",error:q==null?void 0:q.message,isLoading:J,submitProps:{disabled:se||!!p.products},children:[g.map((Z,M)=>{var Q,L,oe,Pe,_,le,k;return I(Ke,{alignItems:"flex-start",children:[d(Vt,{rules:{required:"Ingrese un producto"},name:`products.${M}.code`,control:u,render:({field:{onChange:ue,name:pe,onBlur:Ie,ref:Se,value:je},fieldState:{error:De}})=>d(xt,{isRequired:!0,mapOptionsTo:{label:"name",value:"code"},query:jt,onChange:ue,inputProps:{size:"sm",_disabled:{color:"yellow.300"},onBlur:Ie,name:pe,value:je},wrapperProps:{flexGrow:1},isDisabled:J,label:"Producto",ref:Se,error:De==null?void 0:De.message})}),d(He,N({data:{label:"Cantidad",type:"number",required:!0},type:"number",isLoading:J,error:(oe=(L=(Q=p.products)==null?void 0:Q[M])==null?void 0:L.amount)==null?void 0:oe.message,size:"sm",wrapperProps:{flexBasis:"min-content"}},y(`products.${M}.amount`,{min:{value:1,message:"M\xEDnimo 1"},validate:ue=>Number.isInteger(+ue)||"Solo valores enteros"}))),d(He,N({data:{label:"Tipo",type:"select",options:[{label:"Capital",value:"blank"},{label:"Provincia",value:"unregistered"}],required:!0},isLoading:J,error:(le=(_=(Pe=p.products)==null?void 0:Pe[M])==null?void 0:_.type)==null?void 0:le.message,size:"sm",wrapperProps:{flexBasis:"fit-content"}},y(`products.${M}.type`))),d(ur,{onClick:()=>W(M),alignSelf:((k=p.products)==null?void 0:k[M])?"center":"flex-end",disabled:g.length===1})]},Z.id)}),d(Oe,{leftIcon:d(St,{}),colorScheme:"teal",size:"sm",onClick:()=>H(fr.products[0]),disabled:se,children:"Agregar"})]})]})},mr=s=>{var u=s,{onClose:a}=u,c=Re(u,["onClose"]);return I(Ge,re(N({transition:"1s ease",bg:Lt("white","gray.800"),boxShadow:"dark-lg",w:{base:"full",lg:60},pos:"fixed",h:"full",display:"flex",flexDirection:"column"},c),{children:[I(bt,{my:8,mx:4,alignItems:"center",justifyContent:"space-between",children:[d(we,{as:tr,color:"red.500",w:"100%",maxW:220,h:"auto",mx:{base:"0.5",lg:3},flexShrink:1,flexBasis:"fit-content"}),d(Ua,{display:{base:"flex",lg:"none"},onClick:a})]}),d(zi,{}),I(Xa,{allowToggle:!0,w:"100%",flexGrow:1,children:[I(Pt,{title:"Pedidos",children:[d(Mi,{}),d(Oi,{})]}),I(Pt,{title:"Productos",children:[d(Ri,{}),d(Pi,{})]}),I(Pt,{title:"Proveedores",children:[d(ki,{}),d(Ei,{})]}),I(Pt,{title:"Categorias",children:[d(xi,{}),d(Ci,{})]})]}),d(Gi,{})]}))},Vi=s=>{var u=s,{onOpen:a}=u,c=Re(u,["onOpen"]);return I(bt,re(N({display:{base:"flex",lg:"none"},ml:{base:0,lg:60},px:4,py:10,height:10,alignItems:"center",bg:Lt("white","gray.900"),justifyContent:{base:"space-between",lg:"flex-end"}},c),{children:[d(Ve,{display:{base:"flex",lg:"none"},onClick:a,variant:"ghost",isRound:!0,"aria-label":"open menu",icon:d(Ya,{})}),d(we,{display:{base:"flex",lg:"none"},as:tr,w:220,h:"auto",color:"red.500"}),d(Ke,{spacing:{base:"0",lg:6}})]}))},Hi=({children:a})=>{const{isOpen:c,onOpen:s,onClose:u}=it();return I(Ge,{minH:"100vh",bg:Lt("gray.100","gray.900"),children:[d(mr,{onClose:u,display:{base:"none",lg:"flex"}}),d(Ja,{autoFocus:!1,isOpen:c,placement:"left",onClose:u,returnFocusOnClose:!1,onOverlayClick:u,size:"full",children:d(Za,{children:d(mr,{onClose:u})})}),d(Vi,{onOpen:s}),d(Ze,{ml:{base:0,lg:60},p:{sm:6},spacing:6,children:a})]})},Wi=[{label:"C\xF3digo",accessor:"code"},{label:"Nombre",accessor:"name"},{label:"Contenido",accessor:"qty"},{label:"Unidad",accessor:"unit"},{label:"Precio [u$S]",accessor:"price"},{label:"Proveedor",accessor:"provider"},{label:"Categor\xEDa",accessor:"category"},{label:"Fue pedido",accessor:"didOrder"},{label:"\xDAltimo pedido",accessor:"orderedAt"},{label:"Stock Capital",accessor:"blankStock"},{label:"Stock Provincia",accessor:"unregisteredStock"},{label:"Stock M\xEDn. Capital",accessor:"blankMinStock"},{label:"Stock M\xEDn. Provincia",accessor:"unregisteredMinStock"},{label:"Stock Max. Capital",accessor:"blankMaxStock"},{label:"Stock Max. Provincia",accessor:"unregisteredMaxStock"},{label:"Actualizado",accessor:"updatedAt"}],Qi=()=>{const{isAuth:a}=ni(),[c,s]=me.exports.useState();me.exports.useEffect(()=>{a!==void 0&&!a&&ei.navigate("/login")},[a]);const{data:u,error:y,isLoading:R,isFetched:p}=Nt(re(N({},c),{enabled:!!c}));return d(Ge,{minH:"100vh",position:"relative",overflow:"hidden",minW:"100%",children:I(Hi,{children:[d(Si,{onSearch:A=>s(wi(A))}),c&&(p&&!(u==null?void 0:u.length)?I(Ze,{color:"warning",textAlign:"center",mt:10,children:[d(we,{as:ti,w:"24",h:"auto"}),d(lt,{children:"No hay resultados para la b\xFAsqueda"})]}):d(di,{data:u,headers:Wi,isLoading:R})),(y==null?void 0:y.message)&&I(Ze,{color:"error",textAlign:"center",mt:10,children:[d(we,{as:Zn,w:"24",h:"auto"}),d(lt,{children:y.message})]})]})})};export{Qi as default};
